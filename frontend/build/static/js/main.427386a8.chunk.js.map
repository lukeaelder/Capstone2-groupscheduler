{"version":3,"sources":["UserContext.js","Dashboard.js","images/small-logo.png","Navbar.js","MessageRoom.js","Group.js","Signup.js","Login.js","NewGroup.js","api.js","Chatroom.js","useLocalStorage.js","ProtectedRoute.js","LoggedOutRoute.js","App.js","index.js"],"names":["UserContext","React","createContext","Dashboard","history","useHistory","useState","formData","setFormData","useContext","curUser","userGroups","handleSubmit","e","a","preventDefault","push","className","username","map","group","i","exact","to","id","title","description","onSubmit","onClick","uuid","value","onChange","target","name","type","placeholder","Navbar","navHidden","setNavHidden","userLoaded","logout","userHidden","setUserHidden","mnavOpen","setmnavOpen","toggleNavSection","section","src","logo","alt","icon","faHome","faUser","faUserPlus","faSignInAlt","faBars","faChevronDown","faChevronUp","data-section","MessageRoom","useParams","socketRef","useRef","messages","setMessages","useEffect","current","io","connect","process","emit","on","data","message","length","required","Group","changeTodo","addTodoS","getGroup","leaveGroup","addMember","addAnnouncement","removeAnnouncement","setGroup","addMembers","setAddMembers","addAnnouncementF","setAddAnnouncementF","addTodo","setAddTodo","progress","role","self_username","group_id","addForm","setAddForm","announcement","addFormA","setAddFormA","todo","addFormT","setAddFormT","res","getGroupInfo","requestLeaveGroup","success","refreshGroup","handleChange","handleSubmitA","handleSubmitT","remAnnouncement","calcProgress","handleTodoChange","level","complete","todos","todosres","Math","round","htmlFor","announcementsres","body","users","user","image_url","text","isNaN","styles","buildStyles","textSize","pathColor","textColor","trailColor","Signup","signup","first_name","last_name","email","password","formErrors","setFormErrors","validateSignup","valid","match","Login","login","validateLogin","NewGroup","createGroup","validateGroup","BASE_URL","SchedulerApi","endpoint","method","url","headers","Authorization","token","params","axios","response","error","alert","Array","isArray","this","request","groups","Chatroom","roomID","userVideo","partnerVideo","peerRef","otherUser","userStream","createPeer","userID","peer","RTCPeerConnection","iceServers","urls","credential","onicecandidate","handleICECandidateEvent","ontrack","handleTrackEvent","onnegotiationneeded","createOffer","then","offer","setLocalDescription","payload","caller","sdp","localDescription","catch","console","log","handleSelectedEvent","handleRecieveCall","incoming","desc","RTCSessionDescription","setRemoteDescription","getTracks","forEach","track","addTrack","createAnswer","answer","handleAnswer","candidate","handleNewICECandidateMsg","RTCIceCandidate","addIceCandidate","srcObject","streams","navigator","mediaDevices","getUserMedia","audio","video","stream","callUser","autoPlay","muted","ref","useLocalStorage","key","initVal","localStorage","getItem","item","setItem","removeItem","ProtectedRoute","path","children","LoggedOutRoute","App","setToken","setUserGroups","setCurUser","setUserLoaded","jwt","decode","getUser","resUser","getGroups","resGroups","getCurUser","inputData","refreshGroups","Provider","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"sjBAIeA,EAFKC,IAAMC,gB,+BCkGXC,EA7FG,WACd,IAAMC,EAAUC,cAEhB,EAAgCC,mBAAS,IAAzC,mBAAOC,EAAP,KAAiBC,EAAjB,KAEA,EAA8BC,qBAAWT,GAAlCU,EAAP,EAAOA,QAASC,EAAhB,EAAgBA,WAMVC,EAAY,uCAAG,WAAOC,GAAP,SAAAC,EAAA,sDACjBD,EAAEE,iBACFX,EAAQY,KAAR,gBAAsBT,IAFL,2CAAH,sDAUlB,OACI,sBAAKU,UAAU,OAAf,UACI,qBAAKA,UAAU,gBAAf,SACI,qBAAKA,UAAU,aAAf,SACI,sBAAKA,UAAU,OAAf,UACI,oBAAIA,UAAU,aAAd,SAA4BP,EAAQQ,WACpC,qBAAKD,UAAU,wBAM3B,sBAAKA,UAAU,UAAf,UACI,qBAAKA,UAAU,aAAf,SACI,sBAAKA,UAAU,OAAf,UACI,oBAAIA,UAAU,aAAd,yBACA,sBAAKA,UAAU,qBAAf,UACI,qBAAKA,UAAU,wBAAf,SACoB,OAAfN,EACG,mBAAGM,UAAU,mBAAb,mDAIA,mCACKN,EAAWQ,KAAI,SAACC,EAAOC,GAAR,OACZ,eAAC,IAAD,CAASC,OAAK,EAACC,GAAE,kBAAaH,EAAMI,IAAcP,UAAU,aAA5D,UACI,mBAAGA,UAAU,mBAAb,SAAiCG,EAAMK,QACvC,mBAAGR,UAAU,kBAAb,SAAgCG,EAAMM,gBAFKL,UAQ/D,cAAC,IAAD,CAASC,OAAK,EAACC,GAAG,cAAcN,UAAU,kBAA1C,SACI,wBAAQA,UAAU,cAAlB,wCAKhB,qBAAKA,UAAU,aAAf,SACI,sBAAKA,UAAU,OAAf,UACI,oBAAIA,UAAU,aAAd,2BACA,qBAAKA,UAAU,qBAAf,SACI,uBAAMA,UAAU,OAAOU,SAAUf,EAAjC,UACI,qBAAKK,UAAU,wCAAf,SACI,wBAAQA,UAAU,oBAAoBW,QAlD/C,WACnB,IAAMJ,EAAKK,cACXzB,EAAQY,KAAR,gBAAsBQ,KAgDM,gCAEJ,qBAAKP,UAAU,WAAf,SACI,qBAAKA,UAAU,SAAf,SACI,uBACIA,UAAU,wBACVO,GAAG,WACHM,MAAOvB,EACPwB,SAnEnB,SAAClB,GAClBL,EAAYK,EAAEmB,OAAOF,QAmEeG,KAAK,WACLC,KAAK,OACLC,YAAY,gBAIxB,sBAAKlB,UAAU,wCAAf,UACI,wBAAQiB,KAAK,SAASjB,UAAU,oBAAhC,uBAAsE,2C,gBCzF3F,G,OAAA,kkCC6JAmB,EAtJA,SAAC,GAAmD,IAAlDC,EAAiD,EAAjDA,UAAWC,EAAsC,EAAtCA,aAAcC,EAAwB,EAAxBA,WAAYC,EAAY,EAAZA,OAElD,EAAoClC,oBAAS,GAA7C,mBAAOmC,EAAP,KAAmBC,EAAnB,KAEA,EAAgCpC,oBAAS,GAAzC,mBAAOqC,EAAP,KAAiBC,EAAjB,KAEMC,EAAmB,SAACC,GACtBJ,GAAeD,IAQnB,OACI,qCACCJ,EACG,qBAAKpB,UAAU,UAAf,SACI,qBAAKA,UAAU,OAAf,SACI,qBAAIA,UAAU,WAAd,UACI,cAAC,IAAD,CAASA,UAAU,WAAWK,OAAK,EAACC,GAAG,aAAvC,SAAoD,qBAAKwB,IAAKC,EAAMC,IAAI,WACvEV,EACG,qCACI,oBAAItB,UAAU,WAAd,SACI,eAAC,IAAD,CAASK,OAAK,EAACC,GAAG,aAAlB,UACI,cAAC,IAAD,CAAiB2B,KAAMC,IAAQlC,UAAU,wBACzC,sBAAMA,UAAU,aAAhB,4BAGR,oBAAIA,UAAU,WAAd,SACI,eAAC,IAAD,CAASK,OAAK,EAACC,GAAG,IAAIK,QAASY,EAA/B,UACI,cAAC,IAAD,CAAiBU,KAAME,IAAQnC,UAAU,wBACzC,sBAAMA,UAAU,aAAhB,4BAKZ,qCACI,oBAAIA,UAAU,WAAd,SACI,eAAC,IAAD,CAASK,OAAK,EAACC,GAAG,UAAlB,UACI,cAAC,IAAD,CAAiB2B,KAAMG,IAAYpC,UAAU,wBAC7C,sBAAMA,UAAU,aAAhB,yBAGR,oBAAIA,UAAU,WAAd,SACI,eAAC,IAAD,CAASK,OAAK,EAACC,GAAG,SAAlB,UACI,cAAC,IAAD,CAAiB2B,KAAMI,IAAarC,UAAU,wBAC9C,sBAAMA,UAAU,aAAhB,2BAKhB,oBAAIA,UAAU,oBAAd,SACI,sBAAKW,QAAS,kBAAMU,GAAcD,IAAlC,UACI,cAAC,IAAD,CAAiBa,KAAMK,IAAQtC,UAAU,wBACzC,sBAAMA,UAAU,aAAhB,qCAOpB,qBAAKA,UAAU,SAAf,SACI,qBAAKA,UAAU,MAAf,SACI,qBAAIA,UAAU,UAAd,UACI,cAAC,IAAD,CAASA,UAAU,UAAUK,OAAK,EAACC,GAAG,aAAtC,SAAmD,qBAAKwB,IAAKC,EAAMC,IAAI,WACvE,oBAAIhC,UAAU,WAAd,kBACKsB,EACG,qCACI,oBAAItB,UAAU,UAAd,SACI,eAAC,IAAD,CAASK,OAAK,EAACC,GAAG,aAAlB,UACI,cAAC,IAAD,CAAiB2B,KAAMC,IAAQlC,UAAU,uBACzC,sBAAMA,UAAU,aAAhB,4BAGR,oBAAIA,UAAU,WAAd,kBACCwB,EACG,oBAAIxB,UAAU,UAAUW,QAAS,kBAAMiB,KAAvC,SACI,gCACI,cAAC,IAAD,CAAiBK,KAAME,IAAQnC,UAAU,uBACzC,sBAAMA,UAAU,aAAhB,qBACA,cAAC,IAAD,CAAiBiC,KAAMM,IAAevC,UAAU,mCAIxD,qCACI,oBAAIA,UAAU,oBAAoBW,QAAS,kBAAMiB,KAAjD,SACI,gCACI,cAAC,IAAD,CAAiBK,KAAME,IAAQnC,UAAU,uBACzC,sBAAMA,UAAU,aAAhB,qBACA,cAAC,IAAD,CAAiBiC,KAAMO,IAAaxC,UAAU,mCAGtD,qBAAKA,UAAU,cAAcyC,eAAa,OAA1C,SACI,oBAAIzC,UAAU,kBAAd,SACI,cAAC,IAAD,CAASK,OAAK,EAACC,GAAG,IAAIK,QAASY,EAA/B,SACI,sBAAMvB,UAAU,aAAhB,gCAQxB,qCACI,oBAAIA,UAAU,UAAd,SACI,eAAC,IAAD,CAASK,OAAK,EAACC,GAAG,UAAlB,UACI,cAAC,IAAD,CAAiB2B,KAAMG,IAAYpC,UAAU,uBAC7C,sBAAMA,UAAU,aAAhB,yBAGR,oBAAIA,UAAU,UAAd,SACI,eAAC,IAAD,CAASK,OAAK,EAACC,GAAG,SAAlB,UACI,cAAC,IAAD,CAAiB2B,KAAMI,IAAarC,UAAU,uBAC9C,sBAAMA,UAAU,aAAhB,2BAKpB,oBAAIA,UAAU,mBAAd,SACI,sBAAKW,QAAS,kBAAMU,GAAcD,IAAlC,UACI,cAAC,IAAD,CAAiBa,KAAMK,IAAQtC,UAAU,uBACzC,sBAAMA,UAAU,aAAhB,mCAOxB,cAAC,IAAD,CAAiBiC,KAAMK,IAAQtC,UAAU,UAAUW,QAAS,kBAAMgB,GAAaD,MAC9EA,EACG,qBAAK1B,UAAU,YAAf,SACKsB,EACG,qCACI,cAAC,IAAD,CAASjB,OAAK,EAACC,GAAG,aAAaK,QAAS,kBAAMgB,GAAY,IAA1D,uBACA,cAAC,IAAD,CAAStB,OAAK,EAACC,GAAG,IAAIK,QA9HrB,WACjBgB,GAAY,GACZJ,KA4HgB,uBAGJ,qCACI,cAAC,IAAD,CAASlB,OAAK,EAACC,GAAG,UAAUK,QAAS,kBAAMgB,GAAY,IAAvD,oBACA,cAAC,IAAD,CAAStB,OAAK,EAACC,GAAG,SAASK,QAAS,kBAAMgB,GAAY,IAAtD,wBAId,S,kDCtFKe,G,aA5DK,SAAC,GAAgB,IAAfzC,EAAc,EAAdA,SACXM,EAAMoC,cAANpC,GACDqC,EAAYC,mBAElB,EAAgCxD,mBAAS,IAAzC,mBAAOyD,EAAP,KAAiBC,EAAjB,KAEA,EAAgC1D,mBAAS,IAAzC,mBAAOC,EAAP,KAAiBC,EAAjB,KAEAyD,qBAAU,WACNJ,EAAUK,QAAUC,IAAGC,QAAQC,qCAC/BR,EAAUK,QAAQI,KAAK,iBAAkB9C,GAEzCqC,EAAUK,QAAQK,GAAG,gBAAgB,SAAAC,GACjCR,GAAY,SAAAD,GAAQ,4BAASA,GAAT,CAAmB,CAAC7C,SAAUsD,EAAKtD,SAAUuD,QAASD,EAAKC,mBAGpF,CAACjD,IAQJ,OACI,sBAAKP,UAAU,cAAf,UACK8C,EAASW,OACN,mCACKX,EAAS5C,KAAI,SAACL,EAAGO,GAAJ,OACV,8BACKP,EAAEI,WAAaA,EACZ,sBAAKD,UAAU,eAAf,UACI,sBAAMA,UAAU,wBAAhB,SAAyCH,EAAEI,WAC3C,sBAAMD,UAAU,oBAAhB,SAAqCH,EAAE2D,YAFRpD,GAKnC,sBAAKJ,UAAU,UAAf,UACI,sBAAMA,UAAU,mBAAhB,SAAoCH,EAAEI,WACtC,sBAAMD,UAAU,eAAhB,SAAgCH,EAAE2D,YAFRpD,IAP5BA,QAepB,KACF,uBAAMM,SA3BU,SAACd,GACrBA,EAAEE,iBACF8C,EAAUK,QAAQI,KAAK,oBAAqB9C,EAAIN,EAAUX,GAC1DC,EAAY,KAwByBS,UAAU,YAA3C,UACI,uBACIA,UAAU,aACVa,MAAOvB,EACPwB,SAAU,SAAAlB,GAAC,OAAIL,EAAYK,EAAEmB,OAAOF,QACpCI,KAAK,OACLyC,UAAQ,EACRxC,YAAY,oBAEhB,wBAAQD,KAAK,SAASjB,UAAU,WAAhC,0B,QCuUD2D,G,cAvXD,SAAC,GAAkG,IAAjGC,EAAgG,EAAhGA,WAAYC,EAAoF,EAApFA,SAAUC,EAA0E,EAA1EA,SAAUC,EAAgE,EAAhEA,WAAYC,EAAoD,EAApDA,UAAWC,EAAyC,EAAzCA,gBAAiBC,EAAwB,EAAxBA,mBAE9E/E,EAAUC,cACTK,EAAWD,qBAAWT,GAAtBU,QACAc,EAAMoC,cAANpC,GACP,EAA0BlB,mBAAS,MAAnC,mBAAOc,EAAP,KAAcgE,EAAd,KAEA,EAAoC9E,oBAAS,GAA7C,mBAAO+E,EAAP,KAAmBC,EAAnB,KACA,EAAgDhF,oBAAS,GAAzD,mBAAOiF,EAAP,KAAyBC,EAAzB,KACA,EAA8BlF,oBAAS,GAAvC,mBAAOmF,EAAP,KAAgBC,EAAhB,KAEIC,EAAW,EAEf,EAA8BrF,mBAAS,CACnCY,SAAU,GACV0E,KAAM,GACNC,cAAenF,EAAQQ,SACvB4E,SAAUtE,IAJd,mBAAOuE,EAAP,KAAgBC,EAAhB,KAOA,EAAgC1F,mBAAS,CACrC2F,aAAc,GACd/E,SAAUR,EAAQQ,SAClB4E,SAAUtE,IAHd,mBAAO0E,EAAP,KAAiBC,EAAjB,KAMA,EAAgC7F,mBAAS,CACrC8F,KAAM,GACNlF,SAAUR,EAAQQ,SAClB4E,SAAUtE,IAHd,mBAAO6E,EAAP,KAAiBC,EAAjB,KAMArC,qBAAU,WAAwB,4CAC9B,4BAAAnD,EAAA,sEACsBiE,EAAS,CAACe,SAAUtE,EAAIN,SAAUR,EAAQQ,WADhE,YACUqF,EADV,wBAGQnB,EAASmB,GAHjB,+CAKe,cAAC,IAAD,CAAUhF,GAAG,OAL5B,4CAD8B,sBAS9B6D,EAAS,MATsB,WAAD,wBAU9BoB,KACD,CAAChF,EAAId,EAASqE,IAEjB,IAAM0B,GAAiB,uCAAG,sBAAA3F,EAAA,sEACJkE,EAAW,CAACc,SAAUtE,EAAIN,SAAUR,EAAQQ,WADxC,kBAEfwF,QAFe,yCAGXtG,EAAQY,KAAK,eAHF,2CAAH,qDAmBjBJ,GAAY,uCAAG,WAAOC,GAAP,SAAAC,EAAA,6DACjBD,EAAEE,iBADe,SAEXkE,EAAUc,GAFC,uBAGXY,KAHW,OAIjBrB,GAAc,GAJG,2CAAH,sDAOZsB,GAAe,SAAC/F,GAClB,MAAsBA,EAAEmB,OAAjBC,EAAP,EAAOA,KAAMH,EAAb,EAAaA,MACbkE,GAAW,SAAAD,GAAO,kCACXA,GADW,kBACD9D,EAAOH,QAWtB+E,GAAa,uCAAG,WAAOhG,GAAP,SAAAC,EAAA,6DAClBD,EAAEE,iBADgB,SAEZmE,EAAgBgB,GAFJ,uBAGZS,KAHY,OAIlBnB,GAAoB,GAJF,2CAAH,sDAcbsB,GAAa,uCAAG,WAAOjG,GAAP,SAAAC,EAAA,6DAClBD,EAAEE,iBADgB,SAEZ+D,EAASuB,GAFG,uBAGZM,KAHY,OAIlBjB,GAAW,GAJO,2CAAH,sDAObqB,GAAe,uCAAG,WAAOvF,EAAIN,GAAX,SAAAJ,EAAA,sEACdqE,EAAmB,CAAC3D,KAAIN,aADV,OAEpByF,KAFoB,2CAAH,wDAKfA,GAAY,uCAAG,4BAAA7F,EAAA,sEACCiE,EAAS,CAACe,SAAUtE,EAAIN,SAAUR,EAAQQ,WAD3C,OACXqF,EADW,OAEjBnB,EAASmB,GACTS,KAHiB,2CAAH,qDAMZC,GAAgB,uCAAG,WAAO5F,EAAGR,GAAV,SAAAC,EAAA,sEACf+D,EAAW,CAACrD,GAAIH,EAAG6F,OAAQrG,EAAEmB,OAAOF,QADrB,OAErB6E,KAFqB,2CAAH,wDAKhBK,GAAe,WACjB,IADuB,EACnBG,EAAW,EACXC,EAAQ,EAFW,cAGPhG,EAAMiG,UAHC,IAGvB,IAAI,EAAJ,qBAA+B,CAAC,IAAxBjB,EAAuB,QAC3BgB,IACmB,IAAfhB,EAAKc,QACLC,GAAW,IAEI,IAAff,EAAKc,OACLC,KATe,8BAYvBxB,EAAW2B,KAAKC,MAAiB,IAAXJ,EAAiBC,IAG3C,OAAc,OAAVhG,EAAwB,qBAAKH,UAAU,UAAf,SAAyB,iDAErD+F,KAGI,sBAAK/F,UAAU,QAAf,UACI,qBAAKA,UAAU,gBAAf,SACI,qBAAKA,UAAU,aAAf,SACI,sBAAKA,UAAU,OAAf,UACI,qBAAIA,UAAU,aAAd,UAA4BG,EAAMA,MAAMK,MACpC,sBAAKR,UAAU,mBAAf,UACI,wBAAQA,UAAU,oCAAoCW,QAAS+E,GAA/D,qBACA,wBAAQ1F,UAAU,0BAA0BW,QAAS6E,GAArD,+BAGR,qBAAKxF,UAAU,eAAf,SACI,mBAAGA,UAAU,mBAAb,SACKG,EAAMA,MAAMM,uBAMjC,sBAAKT,UAAU,UAAf,UACI,qBAAKA,UAAU,aAAf,SACI,sBAAKA,UAAU,OAAf,UACI,qBAAIA,UAAU,aAAd,kBACI,wBAAQA,UAAU,wBAAwBW,QAxG5C,WAClB8D,GAAYD,IAuGQ,yBAEJ,qBAAKxE,UAAU,4BAAf,SACI,qBAAKA,UAAU,wBAAf,SACKwE,EACG,mCACI,uBAAMxE,UAAU,OAAOU,SAAUmF,GAAjC,UACI,qBAAK7F,UAAU,WAAf,SACI,sBAAKA,UAAU,SAAf,UACI,uBAAOuG,QAAQ,eAAf,kBACA,uBACIvG,UAAU,aACVO,GAAG,OACHM,MAAOiE,EAAQE,aACflE,SAtF9B,SAAClB,GACnB,MAAsBA,EAAEmB,OAAjBC,EAAP,EAAOA,KAAMH,EAAb,EAAaA,MACbwE,GAAY,SAAAD,GAAQ,kCACbA,GADa,kBACFpE,EAAOH,QAoFuBG,KAAK,OACLC,KAAK,OACLyC,UAAQ,SAIpB,sBAAK1D,UAAU,2BAAf,UACI,wBAAQiB,KAAK,SAASjB,UAAU,WAAhC,oBAA0D,+BAKtE,mCACKG,EAAMiG,SAAS3C,OACZ,mCACKtD,EAAMiG,SAASlG,KAAI,SAACL,EAAGO,GAAJ,OAChB,sBAAKJ,UAAS,qBAAgBH,EAAEoG,MAAlB,eAAd,UACI,yBAAQjG,UAAS,sBAAiBH,EAAEoG,OAASpF,MAAOhB,EAAEoG,MAAOjF,KAAK,cAAcT,GAAG,cAAcO,SAAU,SAAClB,GAAD,OAAOoG,GAAiBnG,EAAEU,GAAIX,IAAzI,UACI,wBAAQiB,MAAM,IAAd,wBACA,wBAAQA,MAAM,IAAd,yBACA,wBAAQA,MAAM,IAAd,yBAEJ,mBAAGb,UAAU,YAAb,SAA0BH,EAAEsF,SANyB/E,QAWjE,mCACA,mBAAGJ,UAAU,mBAAb,mCAW5B,qBAAKA,UAAU,aAAf,SACI,sBAAKA,UAAU,OAAf,UACI,qBAAIA,UAAU,aAAd,0BACA,wBAAQA,UAAU,wBAAwBW,QArK/B,WAC3B4D,GAAqBD,IAoKL,iCAEA,qBAAKtE,UAAU,4BAAf,SACA,qBAAKA,UAAU,wBAAf,SACSsE,EACG,mCACI,uBAAMtE,UAAU,OAAOU,SAAUkF,GAAjC,UACI,qBAAK5F,UAAU,WAAf,SACI,sBAAKA,UAAU,SAAf,UACI,uBAAOuG,QAAQ,eAAf,0BACA,uBACIvG,UAAU,aACVO,GAAG,eACHM,MAAOiE,EAAQE,aACflE,SA7J9B,SAAClB,GACnB,MAAsBA,EAAEmB,OAAjBC,EAAP,EAAOA,KAAMH,EAAb,EAAaA,MACbqE,GAAY,SAAAD,GAAQ,kCACbA,GADa,kBACFjE,EAAOH,QA2JuBG,KAAK,eACLC,KAAK,OACLyC,UAAQ,SAIpB,sBAAK1D,UAAU,2BAAf,UACI,wBAAQiB,KAAK,SAASjB,UAAU,WAAhC,oBAA0D,+BAKtE,mCACKG,EAAMqG,iBAAiB/C,OACpB,mCACKtD,EAAMqG,iBAAiBtG,KAAI,SAACL,EAAGO,GAAJ,OACxB,sBAAKJ,UAAU,qBAAf,UACI,oBAAGA,UAAU,SAAb,UAAuBH,EAAEI,SACpBJ,EAAEI,WAAaR,EAAQQ,SACxB,sBAAMD,UAAU,cAAcW,QAAS,kBAAMmF,GAAgBjG,EAAEU,GAAId,EAAQQ,WAA3E,oBACE,QAEN,uBACA,mBAAGD,UAAU,SAAb,SAAuBH,EAAE4G,SAPYrG,QAYjD,mCACA,mBAAGJ,UAAU,mBAAb,8CAYhC,sBAAKA,UAAU,UAAf,UACI,qBAAKA,UAAU,eAAf,SACI,sBAAKA,UAAU,OAAf,UACI,qBAAIA,UAAU,aAAd,uBAAsCG,EAAMuG,MAAMjD,OAC9C,wBAAQzD,UAAU,wBAAwBW,QArOzC,WACrB0D,GAAeD,IAoOK,4BAEJ,qBAAKpE,UAAU,4BAAf,SACI,qBAAKA,UAAU,wBAAf,SACKoE,EACG,mCACI,uBAAMpE,UAAU,OAAOU,SAAUf,GAAjC,UACI,qBAAKK,UAAU,WAAf,SACI,sBAAKA,UAAU,SAAf,UACI,uBAAOuG,QAAQ,WAAf,sBACA,uBACIvG,UAAU,aACVO,GAAG,WACHM,MAAOiE,EAAQ7E,SACfa,SAAU6E,GACV3E,KAAK,WACLC,KAAK,OACLyC,UAAQ,SAIpB,qBAAK1D,UAAU,WAAf,SACI,sBAAKA,UAAU,SAAf,UACI,uBAAOuG,QAAQ,OAAf,kBACA,uBACIvG,UAAU,aACVO,GAAG,OACHM,MAAOiE,EAAQH,KACf7D,SAAU6E,GACV3E,KAAK,OACLC,KAAK,OACLyC,UAAQ,SAIpB,sBAAK1D,UAAU,2BAAf,UACI,wBAAQiB,KAAK,SAASjB,UAAU,WAAhC,wBAA8D,+BAK1E,mCACKG,EAAMuG,MAAMxG,KAAI,SAACyG,EAAMvG,GAAP,OACb,sBAAKJ,UAAU,eAAf,UACK2G,EAAKC,UACF,qBAAK9E,IAAK6E,EAAKC,UAAW5G,UAAU,mBAAmBgC,IAAI,cAE3D,cAAC,IAAD,CAAiBC,KAAME,IAAQnC,UAAU,qBAE7C,oBAAGA,UAAU,oBAAb,UAAkC2G,EAAK1G,SAClC0G,EAAK1G,WAAaR,EAAQQ,SACvB,SAAW,KACf,+BAAO0G,EAAKhC,YATevE,iBAmB/D,qBAAKJ,UAAU,eAAf,SACI,sBAAKA,UAAU,OAAf,UACI,oBAAIA,UAAU,aAAd,sBACA,qBAAKA,UAAU,4BAAf,SACI,cAAC,IAAD,CACIa,MAAO6D,EACPmC,KAAI,oBAAeC,MAAMpC,GAAY,MAAQA,EAAzC,KACJqC,OAAQC,YAAY,CAChBC,SAAU,OACVC,UAAU,UACVC,UAAW,OACXC,WAAY,qBAMhC,qBAAKpH,UAAU,eAAf,SACI,sBAAKA,UAAU,OAAf,UACI,oBAAIA,UAAU,aAAd,kBACA,qBAAKA,UAAU,4BAAf,SACI,qBAAKA,UAAU,wBAAf,SACI,cAAC,EAAD,CAAaC,SAAUR,EAAQQ,6BC7MhDoH,EAvKA,SAAC,GAAc,IAAbC,EAAY,EAAZA,OAEPnI,EAAUC,cAEhB,EAAgCC,mBAAS,CACrCkI,WAAY,GACZC,UAAW,GACXvH,SAAU,GACVwH,MAAO,GACPC,SAAU,KALd,mBAAOpI,EAAP,KAAiBC,EAAjB,KAQA,EAAoCF,mBAAS,CACzCkI,YAAY,EACZC,WAAW,EACXvH,UAAU,EACVwH,OAAO,EACPC,UAAU,IALd,mBAAOC,EAAP,KAAmBC,EAAnB,KAQMjC,EAAe,SAAC/F,GAClB,MAAsBA,EAAEmB,OAAjBC,EAAP,EAAOA,KAAMH,EAAb,EAAaA,MACbtB,GAAY,SAAAD,GAAQ,kCACbA,GADa,kBACF0B,EAAOH,QAIvBgH,EAAiB,WACnB,IAAIC,GAAQ,EAsCZ,OArCAF,EAAc,CACVL,YAAY,EACZC,WAAW,EACXvH,UAAU,EACVwH,OAAO,EACPC,UAAU,IAEVpI,EAAQ,WAAemE,OAAS,IAChCqE,GAAQ,EACRF,GAAc,SAAAD,GAAU,kCACjBA,GADiB,IACL,YAAc,QAGjCrI,EAAQ,UAAcmE,OAAS,IAC/BqE,GAAQ,EACRF,GAAc,SAAAD,GAAU,kCACjBA,GADiB,IACL,WAAa,QAGhCrI,EAAQ,SAAamE,OAAS,IAC9BqE,GAAQ,EACRF,GAAc,SAAAD,GAAU,kCACjBA,GADiB,IACL,UAAY,QAG9BrI,EAAQ,MAAUyI,MAAM,0EACzBD,GAAQ,EACRF,GAAc,SAAAD,GAAU,kCACjBA,GADiB,IACL,OAAS,QAG5BrI,EAAQ,SAAamE,OAAS,IAC9BqE,GAAQ,EACRF,GAAc,SAAAD,GAAU,kCACjBA,GADiB,IACL,UAAY,QAG5BG,GAGLnI,EAAY,uCAAG,WAAOC,GAAP,SAAAC,EAAA,yDACjBD,EAAEE,kBACY+H,IAFG,gCAIGP,EAAOhI,GAJV,cAKNmG,SACHtG,EAAQY,KAAK,cANJ,2CAAH,sDAWlB,OACI,qBAAKC,UAAU,SAAf,SACI,qBAAKA,UAAU,UAAf,SACI,qBAAKA,UAAU,aAAf,SACI,sBAAKA,UAAU,gBAAf,UACI,oBAAIA,UAAU,aAAd,oBACA,qBAAKA,UAAU,eAAf,SACI,uBAAMA,UAAU,OAAOU,SAAUf,EAAjC,UACI,sBAAKK,UAAU,WAAf,UACI,sBAAKA,UAAU,SAAf,UACI,uBAAOuG,QAAQ,aAAf,wBACA,uBACIvG,UAAS,qBAAgB2H,EAAWJ,WAAa,cAAgB,IACjEhH,GAAG,aACHM,MAAOvB,EAASiI,WAChBzG,SAAU6E,EACV3E,KAAK,aACLC,KAAK,SAER0G,EAAWJ,WAAa,sBAAMvH,UAAU,aAAhB,oCAA6D,QAE1F,sBAAKA,UAAU,SAAf,UACI,uBAAOuG,QAAQ,YAAf,uBACA,uBACIvG,UAAS,qBAAgB2H,EAAWH,UAAY,cAAgB,IAChEjH,GAAG,YACHM,MAAOvB,EAASkI,UAChB1G,SAAU6E,EACV3E,KAAK,YACLC,KAAK,SAER0G,EAAWH,UAAY,sBAAMxH,UAAU,aAAhB,oCAA6D,QAEzF,sBAAKA,UAAU,SAAf,UACI,uBAAOuG,QAAQ,WAAf,sBACA,uBACIvG,UAAS,qBAAgB2H,EAAW1H,SAAW,cAAgB,IAC/DM,GAAG,WACHM,MAAOvB,EAASW,SAChBa,SAAU6E,EACV3E,KAAK,WACLC,KAAK,SAER0G,EAAW1H,SAAW,sBAAMD,UAAU,aAAhB,0CAAmE,WAGlG,sBAAKA,UAAU,WAAf,UACI,sBAAKA,UAAU,SAAf,UACI,uBAAOuG,QAAQ,QAAf,mBACA,uBACIvG,UAAS,qBAAgB2H,EAAWF,MAAQ,cAAgB,IAC5DlH,GAAG,QACHM,MAAOvB,EAASmI,MAChB3G,SAAU6E,EACV3E,KAAK,QACLC,KAAK,SAER0G,EAAWF,MAAQ,sBAAMzH,UAAU,aAAhB,mCAA4D,QAEpF,sBAAKA,UAAU,SAAf,UACI,uBAAOuG,QAAQ,WAAf,sBACA,uBACIvG,UAAS,qBAAgB2H,EAAWD,SAAW,cAAgB,IAC/DnH,GAAG,WACHM,MAAOvB,EAASoI,SAChB5G,SAAU6E,EACV3E,KAAK,WACLC,KAAK,aAER0G,EAAWD,SAAW,sBAAM1H,UAAU,aAAhB,0CAAmE,WAGlG,sBAAKA,UAAU,2BAAf,UACI,wBAAQiB,KAAK,SAASjB,UAAU,WAAhC,oBAA0D,uBAC1D,uBAAMA,UAAU,eAAhB,gCACuB,cAAC,IAAD,CAASA,UAAU,YAAYK,OAAK,EAACC,GAAG,SAAxC,yCCtD5C0H,EArGD,SAAC,GAAa,IAAZC,EAAW,EAAXA,MACN9I,EAAUC,cAEhB,EAAgCC,mBAAS,CACrCY,SAAU,GACVyH,SAAU,KAFd,mBAAOpI,EAAP,KAAiBC,EAAjB,KAKA,EAAoCF,mBAAS,CACzCY,UAAU,EACVyH,UAAU,IAFd,mBAAOC,EAAP,KAAmBC,EAAnB,KAKMjC,EAAe,SAAC/F,GAClB,MAAsBA,EAAEmB,OAAjBC,EAAP,EAAOA,KAAMH,EAAb,EAAaA,MACbtB,GAAY,SAAAD,GAAQ,kCACbA,GADa,kBACF0B,EAAOH,QAIvBlB,EAAY,uCAAG,WAAOC,GAAP,SAAAC,EAAA,yDACjBD,EAAEE,kBACYoI,IAFG,gCAIGD,EAAM3I,GAJT,cAKNmG,SACHtG,EAAQY,KAAK,cANJ,2CAAH,sDAWZmI,EAAgB,WAClB,IAAIJ,GAAQ,EAiBZ,OAhBAF,EAAc,CACV3H,UAAU,EACVyH,UAAU,IAEVpI,EAAQ,SAAamE,OAAS,IAC9BqE,GAAQ,EACRF,GAAc,SAAAD,GAAU,kCACjBA,GADiB,IACL,UAAY,QAG/BrI,EAAQ,SAAamE,OAAS,IAC9BqE,GAAQ,EACRF,GAAc,SAAAD,GAAU,kCACjBA,GADiB,IACL,UAAY,QAG5BG,GAGX,OACI,qBAAK9H,UAAU,QAAf,SACI,qBAAKA,UAAU,UAAf,SACI,qBAAKA,UAAU,aAAf,SACI,sBAAKA,UAAU,gBAAf,UACI,oBAAIA,UAAU,aAAd,mBACA,qBAAKA,UAAU,eAAf,SACI,uBAAMA,UAAU,OAAOU,SAAUf,EAAjC,UACI,sBAAKK,UAAU,WAAf,UACI,sBAAKA,UAAU,SAAf,UACI,uBAAOuG,QAAQ,WAAf,sBACA,uBACIvG,UAAS,qBAAgB2H,EAAW1H,SAAW,cAAgB,IAC/DM,GAAG,WACHM,MAAOvB,EAASW,SAChBa,SAAU6E,EACV3E,KAAK,WACLC,KAAK,SAER0G,EAAW1H,SAAW,sBAAMD,UAAU,aAAhB,8BAAuD,QAElF,sBAAKA,UAAU,SAAf,UACI,uBAAOuG,QAAQ,WAAf,sBACA,uBACIvG,UAAS,qBAAgB2H,EAAWD,SAAW,cAAgB,IAC/DnH,GAAG,WACHM,MAAOvB,EAASoI,SAChB5G,SAAU6E,EACV3E,KAAK,WACLC,KAAK,aAER0G,EAAWD,SAAW,sBAAM1H,UAAU,aAAhB,8BAAuD,WAGtF,sBAAKA,UAAU,2BAAf,UACI,wBAAQiB,KAAK,SAASjB,UAAU,WAAhC,mBAAyD,uBACzD,uBAAMA,UAAU,eAAhB,4BACmB,cAAC,IAAD,CAASA,UAAU,YAAYK,OAAK,EAACC,GAAG,UAAxC,yCCYxC6H,EApGE,SAAC,GAAmB,IAAlBC,EAAiB,EAAjBA,YACTjJ,EAAUC,cACTK,EAAWD,qBAAWT,GAAtBU,QAEP,EAAgCJ,mBAAS,CACrCmB,MAAO,GACPC,YAAa,GACbR,SAAUR,EAAQQ,WAHtB,mBAAOX,EAAP,KAAiBC,EAAjB,KAMA,EAAoCF,mBAAS,CACzCmB,OAAO,EACPC,aAAa,IAFjB,mBAAOkH,EAAP,KAAmBC,EAAnB,KAKMjC,EAAe,SAAC/F,GAClB,MAAsBA,EAAEmB,OAAjBC,EAAP,EAAOA,KAAMH,EAAb,EAAaA,MACbtB,GAAY,SAAAD,GAAQ,kCACbA,GADa,kBACF0B,EAAOH,QAIvBwH,EAAgB,WAClB,IAAIP,GAAQ,EAiBZ,OAhBAF,EAAc,CACVpH,OAAO,EACPC,aAAa,IAEbnB,EAAQ,MAAUmE,OAAS,IAC3BqE,GAAQ,EACRF,GAAc,SAAAD,GAAU,kCACjBA,GADiB,IACL,OAAS,QAG5BrI,EAAQ,YAAgBmE,OAAS,IACjCqE,GAAQ,EACRF,GAAc,SAAAD,GAAU,kCACjBA,GADiB,IACL,aAAe,QAG/BG,GAGLnI,EAAY,uCAAG,WAAOC,GAAP,SAAAC,EAAA,yDACjBD,EAAEE,kBACYuI,IAFG,gCAIGD,EAAY9I,GAJf,cAKNmG,SACHtG,EAAQY,KAAK,cANJ,2CAAH,sDAWlB,OACI,qBAAKC,UAAU,WAAf,SACI,qBAAKA,UAAU,UAAf,SACI,qBAAKA,UAAU,aAAf,SACI,sBAAKA,UAAU,gBAAf,UACI,oBAAIA,UAAU,aAAd,gCACA,qBAAKA,UAAU,eAAf,SACI,uBAAMA,UAAU,OAAOU,SAAUf,EAAjC,UACI,sBAAKK,UAAU,WAAf,UACI,sBAAKA,UAAU,SAAf,UACI,uBAAOuG,QAAQ,QAAf,mBACA,uBACIvG,UAAS,qBAAgB2H,EAAWnH,MAAQ,cAAgB,IAC5DD,GAAG,QACHM,MAAOvB,EAASkB,MAChBM,SAAU6E,EACV3E,KAAK,QACLC,KAAK,SAER0G,EAAWnH,MAAQ,sBAAMR,UAAU,aAAhB,oCAA6D,QAErF,sBAAKA,UAAU,SAAf,UACI,uBAAOuG,QAAQ,cAAf,yBACA,uBACIvG,UAAS,qBAAgB2H,EAAWlH,YAAc,cAAgB,IAClEF,GAAG,cACHM,MAAOvB,EAASmB,YAChBK,SAAU6E,EACV3E,KAAK,cACLC,KAAK,SAER0G,EAAWlH,YAAc,sBAAMT,UAAU,aAAhB,oCAA6D,WAG/F,sBAAKA,UAAU,2BAAf,UACI,wBAAQiB,KAAK,SAASjB,UAAU,WAAhC,oBAA0D,yC,oCC7FxFsI,EAAWlF,oCA+EFmF,E,mIA1EX,WAAqBC,GAArB,oGAA+BjF,EAA/B,+BAAsC,GAAIkF,EAA1C,+BAAmD,MACzCC,EADV,UACmBJ,EADnB,YAC+BE,GACrBG,EAAU,CAAEC,cAAc,UAAD,OAAYL,EAAaM,QAClDC,EAAqB,QAAXL,EAAoBlF,EAAO,GAH/C,kBAKoBwF,IAAM,CAAEL,MAAKD,SAAQlF,OAAMuF,SAAQH,YALvD,uCAKmEpF,MALnE,wCAOUC,EAAU,KAAIwF,SAASzF,KAAK0F,MAAMzF,QACtC0F,MAAM1F,GACA2F,MAAMC,QAAQ5F,GAAWA,EAAU,CAACA,GAThD,0D,kHAaA,WAAoBD,GAApB,uFACoB8F,KAAKC,QAAL,cAA4B/F,EAAM,QADtD,cACQ+B,EADR,yBAEWA,EAAIuD,OAFf,gD,iHAKA,WAAmBtF,GAAnB,uFACoB8F,KAAKC,QAAL,aAA2B/F,EAAM,QADrD,cACQ+B,EADR,yBAEWA,EAAIuD,OAFf,gD,mHAKA,WAAqB5I,GAArB,uFACoBoJ,KAAKC,QAAL,gBAAsBrJ,IAD1C,cACQqF,EADR,yBAEWA,EAAIqB,MAFf,gD,uHAKA,WAAyBpD,GAAzB,uFACoB8F,KAAKC,QAAL,aAA2B/F,EAAM,QADrD,cACQ+B,EADR,yBAEWA,EAAInF,OAFf,gD,oHAKA,WAAsBoD,GAAtB,uFACoB8F,KAAKC,QAAL,qBAA2B/F,EAAKsB,UAAYtB,EAAM,QADtE,cACQ+B,EADR,yBAEWA,EAAInF,OAFf,gD,qHAKA,WAAuBF,GAAvB,uFACoBoJ,KAAKC,QAAL,iBAAuBrJ,EAAvB,SADpB,cACQqF,EADR,yBAEWA,EAAIiE,QAFf,gD,sHAKA,WAAwBhG,GAAxB,uFACoB8F,KAAKC,QAAL,uBAA6B/F,EAAKsB,UAAYtB,EAAM,QADxE,cACQ+B,EADR,yBAEWA,GAFX,gD,qHAKA,WAAuB/B,GAAvB,uFACoB8F,KAAKC,QAAL,qBAA2B/F,EAAKsB,UAAYtB,EAAM,QADtE,cACQ+B,EADR,yBAEWA,GAFX,gD,2HAKA,WAA6B/B,GAA7B,uFACoB8F,KAAKC,QAAL,0BAAwC/F,EAAM,QADlE,cACQ+B,EADR,yBAEWA,GAFX,gD,2HAKA,WAA6B/B,GAA7B,uFACoB8F,KAAKC,QAAL,6BAA2C/F,EAAM,QADrE,cACQ+B,EADR,yBAEWA,GAFX,gD,mHAKA,WAAqB/B,GAArB,uFACoB8F,KAAKC,QAAL,kBAAgC/F,EAAM,QAD1D,cACQ+B,EADR,yBAEWA,GAFX,gD,sHAKA,WAAwB/B,GAAxB,uFACoB8F,KAAKC,QAAL,qBAAmC/F,EAAM,QAD7D,cACQ+B,EADR,yBAEWA,GAFX,gD,8DC4CWkE,G,OAlHE,WACb,IAAOC,EAAU9G,cAAV8G,OACDC,EAAY7G,mBACZ8G,EAAe9G,mBACf+G,EAAU/G,mBACVD,EAAYC,mBACZgH,EAAYhH,mBACZiH,EAAajH,mBA0BnB,SAASkH,EAAWC,GAChB,IAAMC,EAAO,IAAIC,kBAAkB,CAC/BC,WAAY,CACR,CAACC,KAAM,8BACP,CAACA,KAAM,wBAAwBC,WAAY,SAASpK,SAAU,sBAMtE,OAHAgK,EAAKK,eAAiBC,EACtBN,EAAKO,QAAUC,EACfR,EAAKS,oBAAsB,kBAI/B,SAA6BV,GACzBJ,EAAQ3G,QAAQ0H,cAAcC,MAAK,SAAAC,GAC/B,OAAOjB,EAAQ3G,QAAQ6H,oBAAoBD,MAC5CD,MAAK,WACJ,IAAMG,EAAU,CACZhK,OAAQiJ,EACRgB,OAAQpI,EAAUK,QAAQ1C,GAC1B0K,IAAKrB,EAAQ3G,QAAQiI,kBAEzBtI,EAAUK,QAAQI,KAAK,QAAS0H,MACjCI,OAAM,SAAAvL,GAAC,OAAIwL,QAAQC,IAAIzL,MAdO0L,CAAoBtB,IAC9CC,EAgBX,SAASsB,EAAkBC,GACvB5B,EAAQ3G,QAAU8G,IAClB,IAAM0B,EAAO,IAAIC,sBAAsBF,EAASP,KAChDrB,EAAQ3G,QAAQ0I,qBAAqBF,GAAMb,MAAK,WAC5Cd,EAAW7G,QAAQ2I,YAAYC,SAAQ,SAAAC,GAAK,OAAIlC,EAAQ3G,QAAQ8I,SAASD,EAAOhC,EAAW7G,eAC5F2H,MAAK,WACJ,OAAOhB,EAAQ3G,QAAQ+I,kBACxBpB,MAAK,SAAAqB,GACJ,OAAOrC,EAAQ3G,QAAQ6H,oBAAoBmB,MAC5CrB,MAAK,WACJ,IAAMG,EAAU,CACZhK,OAAQyK,EAASR,OACjBA,OAAQpI,EAAUK,QAAQ1C,GAC1B0K,IAAKrB,EAAQ3G,QAAQiI,kBAEzBtI,EAAUK,QAAQI,KAAK,SAAU0H,MAIzC,SAASmB,EAAa1I,GAClB,IAAMiI,EAAO,IAAIC,sBAAsBlI,EAAQyH,KAC/CrB,EAAQ3G,QAAQ0I,qBAAqBF,GAAMN,OAAM,SAAAvL,GAAC,OAAIwL,QAAQC,IAAIzL,MAGtE,SAAS2K,EAAwB3K,GAC7B,GAAIA,EAAEuM,UAAW,CACb,IAAMpB,EAAU,CACZhK,OAAQ8I,EAAU5G,QAClBkJ,UAAWvM,EAAEuM,WAEjBvJ,EAAUK,QAAQI,KAAK,gBAAiB0H,IAIhD,SAASqB,EAAyBZ,GAC9B,IAAMW,EAAY,IAAIE,gBAAgBb,GACtC5B,EAAQ3G,QAAQqJ,gBAAgBH,GAC3BhB,OAAM,SAAAvL,GAAC,OAAIwL,QAAQC,IAAIzL,MAGhC,SAAS6K,EAAiB7K,GACtB+J,EAAa1G,QAAQsJ,UAAY3M,EAAE4M,QAAQ,GAG/C,OA9FAxJ,qBAAU,WACNyJ,UAAUC,aAAaC,aAAa,CAAEC,OAAO,EAAMC,OAAO,IAAQjC,MAAK,SAAAkC,GACnEpD,EAAUzG,QAAQsJ,UAAYO,EAC9BhD,EAAW7G,QAAU6J,EACrBlK,EAAUK,QAAUC,IAAGC,QAAQC,qCAC/BR,EAAUK,QAAQI,KAAK,YAAaoG,GACpC7G,EAAUK,QAAQK,GAAG,cAAc,SAAA0G,IAa3C,SAAkBA,GACdJ,EAAQ3G,QAAU8G,EAAWC,GAC7BF,EAAW7G,QAAQ2I,YAAYC,SAAQ,SAAAC,GAAK,OAAIlC,EAAQ3G,QAAQ8I,SAASD,EAAOhC,EAAW7G,YAdnF8J,CAAS/C,GACTH,EAAU5G,QAAU+G,KAExBpH,EAAUK,QAAQK,GAAG,eAAe,SAAA0G,GAChCH,EAAU5G,QAAU+G,KAExBpH,EAAUK,QAAQK,GAAG,QAASiI,GAC9B3I,EAAUK,QAAQK,GAAG,SAAU4I,GAC/BtJ,EAAUK,QAAQK,GAAG,gBAAiB8I,QAE3C,CAAC3C,IA8EA,sBAAKzJ,UAAU,WAAf,UACI,sBAAKA,UAAU,iBAAf,UACI,uBAAOgN,UAAQ,EAACC,OAAK,EAACC,IAAKxD,EAAW1J,UAAU,qBAChD,uBAAOgN,UAAQ,EAACE,IAAKvD,EAAc3J,UAAU,2BAEjD,uBAAMA,UAAU,aAAhB,sBAAsC,uBAAMyJ,U,iBCrGzC0D,EAXS,SAACC,GAAyB,IAApBC,EAAmB,uDAAT,KAC9BxM,EAAQyM,aAAaC,QAAQH,IAAQC,EAC3C,EAAwBhO,mBAASwB,GAAjC,mBAAO2M,EAAP,KAAaC,EAAb,KAMA,OALAzK,qBAAU,WACG,OAATwK,EACIF,aAAaI,WAAWN,GACxBE,aAAaG,QAAQL,EAAKI,KAC/B,CAACJ,EAAKI,IACF,CAACA,EAAMC,ICMHE,EAZQ,SAAC,GAA6B,IAA5BtN,EAA2B,EAA3BA,MAAOuN,EAAoB,EAApBA,KAAMC,EAAc,EAAdA,SAGlC,OAFkBrO,qBAAWT,GAAtBU,QAKH,cAAC,IAAD,CAAOY,MAAOA,EAAOuN,KAAMA,EAA3B,SACKC,IAJY,cAAC,IAAD,CAAUvN,GAAG,YCSvBwN,EAZQ,SAAC,GAA6B,IAA5BzN,EAA2B,EAA3BA,MAAOuN,EAAoB,EAApBA,KAAMC,EAAc,EAAdA,SAGlC,OAAgB,OAFErO,qBAAWT,GAAtBU,QAEsB,cAAC,IAAD,CAAUa,GAAG,eAGtC,cAAC,IAAD,CAAOD,MAAOA,EAAOuN,KAAMA,EAA3B,SACKC,KCoMEE,MA9Lf,WAEE,MAA0BZ,EAJC,mBAI3B,mBAAOtE,EAAP,KAAcmF,EAAd,KACA,EAAoC3O,mBAAS,IAA7C,mBAAOK,EAAP,KAAmBuO,EAAnB,KACA,EAA8B5O,mBAAS,MAAvC,mBAAOI,EAAP,KAAgByO,EAAhB,KACA,EAAkC7O,oBAAS,GAA3C,mBAAO+B,EAAP,KAAkBC,EAAlB,KACA,EAAoChC,oBAAS,GAA7C,mBAAmB8O,GAAnB,WAEAnL,qBAAU,WAAmB,4CAC3B,kCAAAnD,EAAA,0DACMgJ,EADN,0BAEqBuF,IAAIC,OAAOxF,GAAvB5I,EAFT,EAESA,SAFT,SAIMsI,EAAaM,MAAQA,EAJ3B,SAK0BN,EAAa+F,QAAQrO,GAL/C,OAKUsO,EALV,OAMML,EAAWK,GANjB,kDAQML,EAAW,MARjB,mCAW4B3F,EAAaiG,UAAUvO,GAXnD,SAWUwO,EAXV,QAYoBhL,QACZwK,EAAcQ,GAbtB,mDAgBMR,EAAc,MAhBpB,QAmBEE,GAAc,GAnBhB,mEAD2B,sBAsB3BF,EAAc,MACdE,GAAc,GAvBc,WAAD,wBAwB3BO,KACC,CAAC7F,IAEJ,IAAMvB,EAAM,uCAAG,WAAOqH,GAAP,eAAA9O,EAAA,+EAEO0I,EAAajB,OAAOqH,GAF3B,cAEP9F,EAFO,OAGXmF,EAASnF,GAHE,kBAIJ,CAACpD,SAAS,IAJN,yDAMJ,CAACA,SAAS,IANN,yDAAH,sDAUNwC,EAAK,uCAAG,WAAO0G,GAAP,eAAA9O,EAAA,+EAEQ0I,EAAaN,MAAM0G,GAF3B,cAEN9F,EAFM,OAGVmF,EAASnF,GAHC,kBAIH,CAAEpD,SAAS,IAJR,yDAMH,CAAEA,SAAS,IANR,yDAAH,sDAUL2C,EAAW,uCAAG,WAAOuG,GAAP,SAAA9O,EAAA,+EAEV0I,EAAaH,YAAYuG,GAFf,uBAGVC,IAHU,gCAIT,CAAEnJ,SAAS,IAJF,yDAMT,CAAEA,SAAS,IANF,yDAAH,sDAmBX3B,EAAQ,uCAAG,WAAO6K,GAAP,eAAA9O,EAAA,+EAEK0I,EAAazE,SAAS6K,GAF3B,cAETxO,EAFS,yBAGNA,GAHM,0DAKN,GALM,yDAAH,sDASRyO,EAAa,uCAAG,gCAAA/O,EAAA,+DACHuO,IAAIC,OAAOxF,GAAvB5I,EADe,EACfA,SADe,SAEDsI,EAAaiG,UAAUvO,GAFtB,QAEhBsJ,EAFgB,QAGT9F,OACTwK,EAAc1E,GAEd0E,EAAc,MANI,2CAAH,qDAUblK,EAAU,uCAAG,WAAO4K,GAAP,SAAA9O,EAAA,+EAET0I,EAAaxE,WAAW4K,GAFf,uBAGTC,IAHS,gCAIR,CAAEnJ,SAAS,IAJH,yDAMR,CAACA,SAAS,IANF,yDAAH,sDAUVzB,EAAS,uCAAG,WAAO2K,GAAP,SAAA9O,EAAA,+EAER0I,EAAavE,UAAU2K,GAFf,gCAGP,CAAClJ,SAAS,IAHH,yDAKP,CAACA,SAAS,IALH,wDAAH,sDASTxB,EAAe,uCAAG,WAAO0K,GAAP,SAAA9O,EAAA,+EAEd0I,EAAatE,gBAAgB0K,GAFf,gCAGb,CAAClJ,SAAS,IAHG,yDAKb,CAACA,SAAS,IALG,wDAAH,sDASfvB,EAAkB,uCAAG,WAAOyK,GAAP,SAAA9O,EAAA,+EAEjB0I,EAAazC,gBAAgB6I,GAFZ,gCAGhB,CAAClJ,SAAS,IAHM,yDAKhB,CAACA,SAAS,IALM,wDAAH,sDASlBjB,EAAO,uCAAG,WAAOmK,GAAP,SAAA9O,EAAA,+EAEN0I,EAAa/D,QAAQmK,GAFf,gCAGL,CAAClJ,SAAS,IAHL,yDAKL,CAACA,SAAS,IALL,wDAAH,sDASP7B,EAAU,uCAAG,WAAO+K,GAAP,SAAA9O,EAAA,+EAET0I,EAAa3E,WAAW+K,GAFf,gCAGR,CAAClJ,SAAS,IAHF,yDAKR,CAACA,SAAS,IALF,wDAAH,sDAehB,OACE,mCACE,cAAC,IAAD,UACE,eAAC,EAAYoJ,SAAb,CAAsBhO,MAAO,CAACpB,UAASyO,aAAYxO,cAAnD,UACE,cAAC,EAAD,CAAQ0B,UAAWA,EAAWC,aAAcA,EAAcC,WAAY7B,EAAS8B,OAVxE,WACb0M,EAAc,MACdC,EAAW,MACXF,EAAS,SAQH,qBAAKhO,UAAS,UAAKoB,EAAY,SAAW,OAA5B,oBAAd,SACE,qBAAKpB,UAAU,eAAf,SACE,eAAC,IAAD,WACE,cAAC,EAAD,CAAgBK,OAAK,EAACuN,KAAK,UAA3B,SACE,cAAC,EAAD,CAAQtG,OAAQA,MAElB,cAAC,EAAD,CAAgBjH,OAAK,EAACuN,KAAK,SAA3B,SACE,cAAC,EAAD,CAAO3F,MAAOA,MAEhB,cAAC,EAAD,CAAgB5H,OAAK,EAACuN,KAAK,aAA3B,SACE,cAAC,EAAD,MAEF,cAAC,EAAD,CAAgBvN,OAAK,EAACuN,KAAK,gBAA3B,SACE,cAAC,EAAD,MAEF,cAAC,EAAD,CAAgBvN,OAAK,EAACuN,KAAK,cAA3B,SACE,cAAC,EAAD,CAAUxF,YAAaA,MAEzB,cAAC,EAAD,CAAgB/H,OAAK,EAACuN,KAAK,cAA3B,SACE,cAAC,EAAD,CAAOhK,WAAYA,EAAYC,SAAUW,EAASV,SAAUA,EAAUC,WAAYA,EAAYC,UAAWA,EAAWC,gBAAiBA,EAAiBC,mBAAoBA,MAE5K,cAAC,IAAD,CAAU5D,GAAG,0B,OChM7BwO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,U","file":"static/js/main.427386a8.chunk.js","sourcesContent":["import React from \"react\";\n\nconst UserContext = React.createContext();\n\nexport default UserContext;","import React, { useContext, useState } from \"react\";\nimport { NavLink, useHistory } from 'react-router-dom';\nimport UserContext from \"./UserContext\";\nimport { v1 as uuid } from \"uuid\";\nimport \"./stylesheets/Sections.css\";\nimport \"./stylesheets/Dashboard.css\";\n\nconst Dashboard = () => {\n    const history = useHistory();\n\n    const [formData, setFormData] = useState(\"\");\n\n    const {curUser, userGroups} = useContext(UserContext);\n\n    const handleChange = (e) => {\n        setFormData(e.target.value);\n    }\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        history.push(`/room/${formData}`);\n    }\n\n    const createChatRoom = () => {\n        const id = uuid();\n        history.push(`/room/${id}`);\n    }\n\n    return (\n        <div className=\"home\">\n            <div className=\"section upper\">\n                <div className=\"col-20 col\">\n                    <div className=\"card\">\n                        <h4 className=\"card-title\">{curUser.username}</h4>\n                        <div className=\"card-content\">\n                            \n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div className=\"section\">\n                <div className=\"col-10 col\">\n                    <div className=\"card\">\n                        <h4 className=\"card-title\">Your groups</h4>\n                        <div className=\"card-content-block\">\n                            <div className=\"card-groups scrollbar\">\n                                {userGroups === null ?\n                                    <p className=\"card-description\">\n                                        You don't appear to be in any groups. \n                                    </p>\n                                :\n                                    <>\n                                        {userGroups.map((group, i) => (\n                                            <NavLink exact to={`/groups/${group.id}`} key={i} className=\"group-link\">\n                                                <p className=\"group-link-title\">{group.title}</p>\n                                                <p className=\"group-link-desc\">{group.description}</p>\n                                            </NavLink>\n                                        ))}\n                                    </>\n                                }\n                            </div>\n                            <NavLink exact to=\"/groups/new\" className=\"form-button-row\">\n                                <button className=\"card-button\">Create new group</button>\n                            </NavLink>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"col-10 col\">\n                    <div className=\"card\">\n                        <h4 className=\"card-title\">Video Calling</h4>\n                        <div className=\"card-content-block\">\n                            <form className=\"form\" onSubmit={handleSubmit}>\n                                <div className=\"form-row form-button-row call-btn-row\">\n                                    <button className=\"form-btn call-btn\" onClick={createChatRoom}>Start a new call</button>\n                                </div>\n                                <div className=\"form-row\">\n                                    <div className=\"form-s\">\n                                        <input \n                                            className=\"form-input call-input\"\n                                            id=\"username\" \n                                            value={formData} \n                                            onChange={handleChange}\n                                            name=\"username\"\n                                            type=\"text\"\n                                            placeholder=\"call id\"\n                                        />\n                                    </div>\n                                </div> \n                                <div className=\"form-row form-button-row call-btn-row\">\n                                    <button type=\"submit\" className=\"form-btn call-btn\">Join call</button><br/>\n                                </div>\n                            </form>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Dashboard;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAC40lEQVR4Xu2csW4TQRCGZw8DRZoguSe8CRJJD30kbJp0kfMkSZvKZ4k+9AGJh0gf00eCJgXE3KFDNHR7K83ov82XenZm7vt2LGV0djL+pAgkqW5oxhAidgkQghAxAmLtMCEIESMg1g4TghAxAmLtMCEIESMg1g4TghAxAmLtMCEIESMg1g4TghAfAovV7X7z+/7cki18Kjhn7a3tnuydVTMhy9ObNpm9d8bmmr4321Qj5MPpTe9KKyg5QoJA55ZBSC6poDiEBIHOLYOQXFJBcQgJAp1bBiG5pILiEBIEOrcMQnJJBcUhJAh0bhmE5JIKiqtGCLusoBuTW2bY9qbu/mKqC8Zhsdg3e6tqJiRXnHocQsQMIQQhYgTE2mFCECJGQKwdJgQhYgTE2mFCECJGQKwdJuSxCvn+enHQzab5Iluzs82Lr+02wl3IhNy9Wby1Jl1FPJBbja5/N//SfnLL/y9xjJCjxa1ZOvB+GN/8/XZ+3b7yrWExP61xd7Ss4jXP+fXa/QK7FxhuFELy5woh+ayMCRkBKyIUIRGUR9RAyAhYEaEIiaA8ogZCRsCKCEVIBOURNRAyAlZEaD1CDpdbS/YyAppbjd6+zT+v3dc/Mf8YslzMvichQoZuhvX7bjbNL/XPdtZWtX7Pvh4Exmx74ZxPIOwjK7+lxx2JEDH/CEGIGAGxdpgQhIgREGuHCUGIGAGxdpgQOSHr9X7z9Oe5WZrmj0da33YPz89sufwhxraondR8vGxt4j8eaWab7vhkohfqf2+DkCreKuyOT6r4+EVI0QeL3yGE+LEtyoyQImx+hxDix7YoM0KKsPkdQogf26LMCCnC5ncIIX5sizIjpAib3yGE+LEtyswuqwib36Fkf7e9vy4mvGDcdA/PVtVse/1ck7mEQBUb0pIHVz2DEDEzCEGIGAGxdpgQhIgREGuHCUGIGAGxdpgQhIgREGuHCUGIGAGxdpgQhIgREGuHCRET8gchrsxqcmnJMQAAAABJRU5ErkJggg==\"","import React, {useState} from \"react\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faSignInAlt, faUserPlus, faHome, faChevronDown, faUser, faBars, faChevronUp} from '@fortawesome/free-solid-svg-icons'\nimport { NavLink } from 'react-router-dom';\nimport \"./stylesheets/Navbar.css\";\nimport logo from \"./images/small-logo.png\";\n\nconst Navbar = ({navHidden, setNavHidden, userLoaded, logout}) => {\n\n    const [userHidden, setUserHidden] = useState(true);\n\n    const [mnavOpen, setmnavOpen] = useState(false);\n\n    const toggleNavSection = (section) => {\n        setUserHidden(!userHidden);\n    }\n\n    const logoutMobile = () => {\n        setmnavOpen(false);\n        logout();\n    }\n\n    return (\n        <>\n        {navHidden ?\n            <div className=\"Navbarh\">\n                <div className=\"Navh\">\n                    <ul className=\"NavMenuh\">\n                        <NavLink className=\"NavLogoh\" exact to=\"/dashboard\"><img src={logo} alt=\"logo\"></img></NavLink>\n                        {userLoaded ?\n                            <>\n                                <li className=\"NavItemh\">\n                                    <NavLink exact to=\"/dashboard\">\n                                        <FontAwesomeIcon icon={faHome} className=\"NavIconh HoverColor\"/>\n                                        <span className=\"HoverColor\">Dashboard</span> \n                                    </NavLink>\n                                </li>\n                                <li className=\"NavItemh\">\n                                    <NavLink exact to=\"/\" onClick={logout}>\n                                        <FontAwesomeIcon icon={faUser} className=\"NavIconh HoverColor\"/>\n                                        <span className=\"HoverColor\">Logout</span>\n                                    </NavLink>\n                                </li>\n                            </>\n                        :\n                            <>\n                                <li className=\"NavItemh\">\n                                    <NavLink exact to=\"/signup\">\n                                        <FontAwesomeIcon icon={faUserPlus} className=\"NavIconh HoverColor\"/>\n                                        <span className=\"HoverColor\">Signup</span> \n                                    </NavLink>\n                                </li>           \n                                <li className=\"NavItemh\">\n                                    <NavLink exact to=\"/login\">\n                                        <FontAwesomeIcon icon={faSignInAlt} className=\"NavIconh HoverColor\"/>\n                                        <span className=\"HoverColor\">Login</span> \n                                    </NavLink>\n                                </li>\n                            </>\n                        }\n                        <li className=\"NavItemh NavFinal\">\n                            <div onClick={() => setNavHidden(!navHidden)}>\n                                <FontAwesomeIcon icon={faBars} className=\"NavIconh HoverColor\"/>\n                                <span className=\"HoverColor\">Expand Menu</span>\n                            </div>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        :\n            <div className=\"Navbar\">\n                <div className=\"Nav\">\n                    <ul className=\"NavMenu\">\n                        <NavLink className=\"NavLogo\" exact to=\"/dashboard\"><img src={logo} alt=\"logo\"></img></NavLink>\n                        <li className=\"NavTitle\">MAIN</li>\n                            {userLoaded ?\n                                <>\n                                    <li className=\"NavItem\">\n                                        <NavLink exact to=\"/dashboard\">\n                                            <FontAwesomeIcon icon={faHome} className=\"NavIcon HoverColor\"/>\n                                            <span className=\"HoverColor\">Dashboard</span> \n                                        </NavLink>\n                                    </li>          \n                                    <li className=\"NavTitle\">USER</li>\n                                    {userHidden ?\n                                        <li className=\"NavItem\" onClick={() => toggleNavSection()}>\n                                            <div>\n                                                <FontAwesomeIcon icon={faUser} className=\"NavIcon HoverColor\"/>\n                                                <span className=\"HoverColor\">Profile</span> \n                                                <FontAwesomeIcon icon={faChevronDown} className=\"NavIcon HoverColor NavEnd\"/>\n                                            </div>\n                                        </li>\n                                    :\n                                        <>\n                                            <li className=\"NavItem NavActive\" onClick={() => toggleNavSection()}>\n                                                <div>\n                                                    <FontAwesomeIcon icon={faUser} className=\"NavIcon HoverColor\"/>\n                                                    <span className=\"HoverColor\">Profile</span> \n                                                    <FontAwesomeIcon icon={faChevronUp} className=\"NavIcon HoverColor NavEnd\"/>\n                                                </div>\n                                            </li>\n                                            <div className=\"NavDropdown\" data-section=\"user\">\n                                                <li className=\"NavItemDropdown\">\n                                                    <NavLink exact to=\"/\" onClick={logout}>\n                                                        <span className=\"HoverColor\">Logout</span> \n                                                    </NavLink>\n                                                </li>\n                                            </div>\n                                        </>\n                                    }\n                                </>\n                            :\n                                <>\n                                    <li className=\"NavItem\">\n                                        <NavLink exact to=\"/signup\">\n                                            <FontAwesomeIcon icon={faUserPlus} className=\"NavIcon HoverColor\"/>\n                                            <span className=\"HoverColor\">Signup</span> \n                                        </NavLink>\n                                    </li>           \n                                    <li className=\"NavItem\">\n                                        <NavLink exact to=\"/login\">\n                                            <FontAwesomeIcon icon={faSignInAlt} className=\"NavIcon HoverColor\"/>\n                                            <span className=\"HoverColor\">Login</span> \n                                        </NavLink>\n                                    </li>\n                                </>\n                            }\n                        <li className=\"NavItem NavFinal\">\n                            <div onClick={() => setNavHidden(!navHidden)}>\n                                <FontAwesomeIcon icon={faBars} className=\"NavIcon HoverColor\"/>\n                                <span className=\"HoverColor\">Hide Menu</span> \n                            </div>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        }\n        <FontAwesomeIcon icon={faBars} className=\"Navmbtn\" onClick={() => setmnavOpen(!mnavOpen)}/>\n        {mnavOpen ?\n            <div className=\"Navmobile\">\n                {userLoaded ?\n                    <>\n                        <NavLink exact to=\"/dashboard\" onClick={() => setmnavOpen(false)}>Dashboard</NavLink>\n                        <NavLink exact to=\"/\" onClick={logoutMobile}>Logout</NavLink>\n                    </>\n                :\n                    <>\n                        <NavLink exact to=\"/signup\" onClick={() => setmnavOpen(false)}>Signup</NavLink>\n                        <NavLink exact to=\"/login\" onClick={() => setmnavOpen(false)}>Login</NavLink>\n                    </>\n                }\n            </div>\n        : null }\n        </> \n    )\n}\n\nexport default Navbar;","import React, {useEffect, useRef, useState} from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport io from \"socket.io-client\";\nimport \"./stylesheets/Message.css\";\nimport \"./stylesheets/Forms.css\";\n\nconst MessageRoom = ({username}) => {\n    const {id} = useParams();\n    const socketRef = useRef();\n\n    const [messages, setMessages] = useState([]);\n\n    const [formData, setFormData] = useState(\"\");\n\n    useEffect(() => {\n        socketRef.current = io.connect(process.env.REACT_APP_BASE_URL || \"http://localhost:5000\");\n        socketRef.current.emit(\"join chat-room\", id);\n\n        socketRef.current.on(\"chat-message\", data => {\n            setMessages(messages => ([...messages, {username: data.username, message: data.message}]));\n        });\n\n    }, [id]);\n\n    const sendChatMessgae = (e) => {\n        e.preventDefault();\n        socketRef.current.emit(\"send-chat-message\", id, username, formData);\n        setFormData(\"\");\n    }\n\n    return (\n        <div className=\"MessageRoom\">\n            {messages.length ?\n                <>\n                    {messages.map((a, i) => (\n                        <div key={i}>\n                            {a.username === username ?\n                                <div className=\"message-self\" key={i}>\n                                    <span className=\"message-username-self\">{a.username}</span>\n                                    <span className=\"message-text-self\">{a.message}</span>\n                                </div>\n                            :\n                                <div className=\"message\" key={i}>\n                                    <span className=\"message-username\">{a.username}</span>\n                                    <span className=\"message-text\">{a.message}</span>\n                                </div>\n                            }\n                        </div>\n                    ))}\n                </>\n            : null }\n            <form onSubmit={sendChatMessgae} className=\"chat-form\">\n                <input \n                    className=\"form-input\"\n                    value={formData}\n                    onChange={e => setFormData(e.target.value)}\n                    type=\"text\"\n                    required\n                    placeholder=\"Enter your text\"\n                />\n                <button type=\"submit\" className=\"chat-btn\">Send</button>\n            </form>\n        </div>\n    )\n}\n\nexport default MessageRoom;","import React, { useState, useEffect, useContext } from \"react\";\nimport { Redirect, useParams, useHistory  } from \"react-router-dom\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faUser } from '@fortawesome/free-solid-svg-icons'\nimport MessageRoom from \"./MessageRoom\";\nimport UserContext from \"./UserContext\";\nimport { CircularProgressbar, buildStyles } from 'react-circular-progressbar';\nimport 'react-circular-progressbar/dist/styles.css';\nimport \"./stylesheets/Group.css\";\nimport \"./stylesheets/Sections.css\";\nimport \"./stylesheets/Forms.css\";\n\nconst Group = ({changeTodo, addTodoS, getGroup, leaveGroup, addMember, addAnnouncement, removeAnnouncement}) => {\n\n    const history = useHistory();\n    const {curUser} = useContext(UserContext);\n    const {id} = useParams();\n    const [group, setGroup] = useState(null);\n\n    const [addMembers, setAddMembers] = useState(false);\n    const [addAnnouncementF, setAddAnnouncementF] = useState(false);\n    const [addTodo, setAddTodo] = useState(false);\n\n    let progress = 0;\n\n    const [addForm, setAddForm] = useState({\n        username: \"\",\n        role: \"\",\n        self_username: curUser.username,\n        group_id: id\n    });\n\n    const [addFormA, setAddFormA] = useState({\n        announcement: \"\",\n        username: curUser.username,\n        group_id: id\n    });\n\n    const [addFormT, setAddFormT] = useState({\n        todo: \"\",\n        username: curUser.username,\n        group_id: id\n    });\n\n    useEffect(function loadGroupInfo(){\n        async function getGroupInfo(){\n            const res = await getGroup({group_id: id, username: curUser.username});\n            if (res) {\n                setGroup(res);\n            } else {\n                return <Redirect to=\"/\" />\n            }\n        }\n        setGroup(null)\n        getGroupInfo();\n    }, [id, curUser, getGroup])\n\n    const requestLeaveGroup = async () => {\n        const res = await leaveGroup({group_id: id, username: curUser.username});\n        if(res.success) {\n            return history.push(\"/dashboard\")\n        }\n    }\n\n    const toggleAddMembers = () => {\n        setAddMembers(!addMembers);\n    }\n\n    const toggleAddAnnouncementF = () => {\n        setAddAnnouncementF(!addAnnouncementF);\n    }\n\n    const toggleAddTodo = () => {\n        setAddTodo(!addTodo);\n    }\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        await addMember(addForm);\n        await refreshGroup();\n        setAddMembers(false);\n    }\n\n    const handleChange = (e) => {\n        const {name, value} = e.target;\n        setAddForm(addForm => ({\n            ...addForm, [name]: value\n        }));\n    }\n\n    const handleChangeA = (e) => {\n        const {name, value} = e.target;\n        setAddFormA(addFormA => ({\n            ...addFormA, [name]: value\n        }));\n    }\n\n    const handleSubmitA = async (e) => {\n        e.preventDefault();\n        await addAnnouncement(addFormA);\n        await refreshGroup();\n        setAddAnnouncementF(false);\n    }\n\n    const handleChangeT = (e) => {\n        const {name, value} = e.target;\n        setAddFormT(addFormT => ({\n            ...addFormT, [name]: value\n        }));\n    }\n\n    const handleSubmitT = async (e) => {\n        e.preventDefault();\n        await addTodoS(addFormT);\n        await refreshGroup();\n        setAddTodo(false);\n    }\n\n    const remAnnouncement = async (id, username) => {\n        await removeAnnouncement({id, username});\n        refreshGroup();\n    }\n\n    const refreshGroup = async () => {\n        const res = await getGroup({group_id: id, username: curUser.username});\n        setGroup(res);\n        calcProgress();\n    }\n\n    const handleTodoChange = async (i, e) => {\n        await changeTodo({id: i, level: +e.target.value});\n        refreshGroup();\n    }\n\n    const calcProgress = () => {\n        let complete = 0;\n        let todos = 0;\n        for(let todo of group.todosres){\n            todos++;\n            if( todo.level === 1) {\n                complete+= 0.5;\n            }\n            if (todo.level === 2) {\n                complete++;\n            }\n        }\n        progress = Math.round(complete * 100 / todos);\n    }\n\n    if (group === null) return (<div className=\"loading\"><span>Loading...</span></div>)\n\n    calcProgress();\n\n    return (\n        <div className=\"Group\">\n            <div className=\"section upper\">\n                <div className=\"col-20 col\">\n                    <div className=\"card\">\n                        <h4 className=\"card-title\">{group.group.title}\n                            <div className=\"card-title-right\">\n                                <button className=\"card-title-right good first-right\" onClick={refreshGroup}>Refresh</button>\n                                <button className=\"card-title-right danger\" onClick={requestLeaveGroup}>Leave group</button>\n                            </div>\n                        </h4>\n                        <div className=\"card-content\">\n                            <p className=\"card-description\">\n                                {group.group.description}\n                            </p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div className=\"section\">\n                <div className=\"col-10 col\">\n                    <div className=\"card\">\n                        <h4 className=\"card-title\">Todos\n                            <button className=\"card-title-right good\" onClick={toggleAddTodo}>Add todo</button>\n                        </h4>\n                        <div className=\"card-content card-section\">\n                            <div className=\"card-groups scrollbar\">\n                                {addTodo ?\n                                    <>\n                                        <form className=\"form\" onSubmit={handleSubmitT}>\n                                            <div className=\"form-row\">\n                                                <div className=\"form-s\">\n                                                    <label htmlFor=\"announcement\">Task</label>\n                                                    <input \n                                                        className=\"form-input\"\n                                                        id=\"todo\" \n                                                        value={addForm.announcement} \n                                                        onChange={handleChangeT}\n                                                        name=\"todo\"\n                                                        type=\"text\"\n                                                        required\n                                                    />\n                                                </div> \n                                            </div>\n                                            <div className=\"form-row form-button-row\">\n                                                <button type=\"submit\" className=\"form-btn\">Submit</button><br/>\n                                            </div>\n                                        </form>\n                                    </>\n                                :\n                                    <>\n                                        {group.todosres.length ?\n                                            <>\n                                                {group.todosres.map((a, i) => (\n                                                    <div className={`group-todo-${a.level} group-todo`} key={i}>\n                                                        <select className={`select-todo-${a.level}`} value={a.level} name=\"todo-status\" id=\"todo-status\" onChange={(e) => handleTodoChange(a.id, e)}>\n                                                            <option value=\"0\">Uncomplete</option>\n                                                            <option value=\"1\">In Progress</option>\n                                                            <option value=\"2\">Complete</option>\n                                                        </select>\n                                                        <p className=\"todo-text\">{a.todo}</p>\n                                                    </div>\n                                                ))}\n                                            </>\n                                        :\n                                            <>\n                                            <p className=\"card-description\">\n                                                No todos\n                                            </p>\n                                            </>\n                                        }\n                                    </>\n                                }\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"col-10 col\">\n                    <div className=\"card\">\n                        <h4 className=\"card-title\">Announcements\n                        <button className=\"card-title-right good\" onClick={toggleAddAnnouncementF}>Add announcement</button>\n                        </h4>\n                        <div className=\"card-content card-section\">\n                        <div className=\"card-groups scrollbar\">\n                                {addAnnouncementF ?\n                                    <>\n                                        <form className=\"form\" onSubmit={handleSubmitA}>\n                                            <div className=\"form-row\">\n                                                <div className=\"form-s\">\n                                                    <label htmlFor=\"announcement\">Announcement</label>\n                                                    <input \n                                                        className=\"form-input\"\n                                                        id=\"announcement\" \n                                                        value={addForm.announcement} \n                                                        onChange={handleChangeA}\n                                                        name=\"announcement\"\n                                                        type=\"text\"\n                                                        required\n                                                    />\n                                                </div> \n                                            </div>\n                                            <div className=\"form-row form-button-row\">\n                                                <button type=\"submit\" className=\"form-btn\">Submit</button><br/>\n                                            </div>\n                                        </form>\n                                    </>\n                                :\n                                    <>\n                                        {group.announcementsres.length ?\n                                            <>\n                                                {group.announcementsres.map((a, i) => (\n                                                    <div className=\"group-announcement\" key={i}>\n                                                        <p className=\"a-user\">{a.username}\n                                                            {a.username === curUser.username ?\n                                                            <span className=\"small-right\" onClick={() => remAnnouncement(a.id, curUser.username)}>Remove</span>\n                                                            : null }\n                                                        </p>\n                                                        <br/>\n                                                        <p className=\"a-body\">{a.body}</p>\n                                                    </div>\n                                                ))}\n                                            </>\n                                        :\n                                            <>\n                                            <p className=\"card-description\">\n                                                No announcements \n                                            </p>\n                                            </>\n                                        }\n                                    </>\n                                }\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div className=\"section\">\n                <div className=\"col-7 col sl\">\n                    <div className=\"card\">\n                        <h4 className=\"card-title\">Members - {group.users.length}\n                            <button className=\"card-title-right good\" onClick={toggleAddMembers}>Add members</button>\n                        </h4>\n                        <div className=\"card-content card-section\">\n                            <div className=\"card-groups scrollbar\">\n                                {addMembers ?\n                                    <>\n                                        <form className=\"form\" onSubmit={handleSubmit}>\n                                            <div className=\"form-row\">\n                                                <div className=\"form-s\">\n                                                    <label htmlFor=\"username\">Username</label>\n                                                    <input \n                                                        className=\"form-input\"\n                                                        id=\"username\" \n                                                        value={addForm.username} \n                                                        onChange={handleChange}\n                                                        name=\"username\"\n                                                        type=\"text\"\n                                                        required\n                                                    />\n                                                </div> \n                                            </div>\n                                            <div className=\"form-row\">\n                                                <div className=\"form-s\">\n                                                    <label htmlFor=\"role\">Role</label>\n                                                    <input \n                                                        className=\"form-input\"\n                                                        id=\"role\" \n                                                        value={addForm.role} \n                                                        onChange={handleChange}\n                                                        name=\"role\"\n                                                        type=\"text\"\n                                                        required\n                                                    />\n                                                </div> \n                                            </div>\n                                            <div className=\"form-row form-button-row\">\n                                                <button type=\"submit\" className=\"form-btn\">Add Member</button><br/>\n                                            </div>\n                                        </form>\n                                    </>\n                                :\n                                    <>\n                                        {group.users.map((user, i) => (\n                                            <div className=\"group-member\" key={i}>\n                                                {user.image_url ?\n                                                    <img src={user.image_url} className=\"group-member-img\" alt=\"user-icon\"></img>\n                                                :   \n                                                    <FontAwesomeIcon icon={faUser} className=\"group-member-img\"/>\n                                                }\n                                                <p className=\"group-member-name\">{user.username}\n                                                    {user.username === curUser.username ? \n                                                        \" - You\" : null}\n                                                    <span>{user.role}</span>\n                                                </p>\n                                            </div>\n                                        ))}\n                                    </>\n                                }\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"col-7 col sl\">\n                    <div className=\"card\">\n                        <h4 className=\"card-title\">Overview</h4>\n                        <div className=\"card-content card-section\">\n                            <CircularProgressbar \n                                value={progress} \n                                text={`Progress: ${isNaN(progress) ? \"100\" : progress}%`}\n                                styles={buildStyles({\n                                    textSize: '10px',\n                                    pathColor: `#02a499`,\n                                    textColor: '#FFF',\n                                    trailColor: '#d6d6d6',\n                                  })}\n                            />\n                        </div>\n                    </div>\n                </div>\n                <div className=\"col-7 col sf\">\n                    <div className=\"card\">\n                        <h4 className=\"card-title\">Chat</h4>\n                        <div className=\"card-content card-section\">\n                            <div className=\"card-groups scrollbar\">\n                                <MessageRoom username={curUser.username}/>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>    \n        </div>\n    )\n}\n\nexport default Group;","import React, {useState} from \"react\";\nimport { NavLink, useHistory } from 'react-router-dom';\nimport \"./stylesheets/Sections.css\";\nimport \"./stylesheets/Forms.css\";\n\nconst Signup = ({signup}) => {\n    \n    const history = useHistory();\n\n    const [formData, setFormData] = useState({\n        first_name: \"\",\n        last_name: \"\",\n        username: \"\",\n        email: \"\",\n        password: \"\"\n    });\n\n    const [formErrors, setFormErrors] = useState({\n        first_name: false,\n        last_name: false,\n        username: false,\n        email: false,\n        password: false\n    });\n\n    const handleChange = (e) => {\n        const {name, value} = e.target;\n        setFormData(formData => ({\n            ...formData, [name]: value\n        }));\n    }\n\n    const validateSignup = () => {\n        let valid = true;\n        setFormErrors({\n            first_name: false,\n            last_name: false,\n            username: false,\n            email: false,\n            password: false\n        })\n        if (formData[\"first_name\"].length < 1){\n            valid = false;\n            setFormErrors(formErrors => ({\n                ...formErrors, \"first_name\": true\n            }))\n        }\n        if (formData[\"last_name\"].length < 1){\n            valid = false;\n            setFormErrors(formErrors => ({\n                ...formErrors, \"last_name\": true\n            }))\n        }\n        if (formData[\"username\"].length < 6){\n            valid = false;\n            setFormErrors(formErrors => ({\n                ...formErrors, \"username\": true\n            }))\n        }\n        if (!formData[\"email\"].match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/)){\n            valid = false;\n            setFormErrors(formErrors => ({\n                ...formErrors, \"email\": true\n            }))\n        }\n        if (formData[\"password\"].length < 8){\n            valid = false;\n            setFormErrors(formErrors => ({\n                ...formErrors, \"password\": true\n            }))\n        }\n        return valid;\n    }\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        const valid = validateSignup();\n        if (valid) {\n            let res = await signup(formData);\n            if(res.success){\n                history.push(\"/dashboard\")\n            }\n        }\n    }\n\n    return (\n        <div className=\"Signup\">\n            <div className=\"section\">\n                <div className=\"col-20 col\">\n                    <div className=\"card formcard\">\n                        <h4 className=\"card-title\">Signup</h4>\n                        <div className=\"card-content\">\n                            <form className=\"form\" onSubmit={handleSubmit}>\n                                <div className=\"form-row\">\n                                    <div className=\"form-s\">\n                                        <label htmlFor=\"first_name\">First Name</label>\n                                        <input \n                                            className={`form-input ${formErrors.first_name ? \"input-error\" : \"\"}`}\n                                            id=\"first_name\" \n                                            value={formData.first_name} \n                                            onChange={handleChange}\n                                            name=\"first_name\"\n                                            type=\"text\"\n                                        />\n                                        {formErrors.first_name ? <span className=\"form-error\">This value is required</span> : null}\n                                    </div>\n                                    <div className=\"form-s\">\n                                        <label htmlFor=\"last_name\">Last Name</label>\n                                        <input \n                                            className={`form-input ${formErrors.last_name ? \"input-error\" : \"\"}`}\n                                            id=\"last_name\" \n                                            value={formData.last_name} \n                                            onChange={handleChange}\n                                            name=\"last_name\"\n                                            type=\"text\"\n                                        />\n                                        {formErrors.last_name ? <span className=\"form-error\">This value is required</span> : null}\n                                    </div>\n                                    <div className=\"form-s\">\n                                        <label htmlFor=\"username\">Username</label>\n                                        <input \n                                            className={`form-input ${formErrors.username ? \"input-error\" : \"\"}`}\n                                            id=\"username\" \n                                            value={formData.username} \n                                            onChange={handleChange}\n                                            name=\"username\"\n                                            type=\"text\"\n                                        />\n                                        {formErrors.username ? <span className=\"form-error\">Must be 6 or more characters</span> : null}\n                                    </div>\n                                </div>\n                                <div className=\"form-row\">\n                                    <div className=\"form-s\">\n                                        <label htmlFor=\"email\">Email</label>\n                                        <input \n                                            className={`form-input ${formErrors.email ? \"input-error\" : \"\"}`}\n                                            id=\"email\" \n                                            value={formData.email} \n                                            onChange={handleChange}\n                                            name=\"email\"\n                                            type=\"text\"\n                                        />\n                                        {formErrors.email ? <span className=\"form-error\">Invalid email address</span> : null}\n                                    </div>\n                                    <div className=\"form-s\">\n                                        <label htmlFor=\"password\">Password</label>\n                                        <input \n                                            className={`form-input ${formErrors.password ? \"input-error\" : \"\"}`}\n                                            id=\"password\" \n                                            value={formData.password} \n                                            onChange={handleChange}\n                                            name=\"password\"\n                                            type=\"password\"\n                                        />\n                                        {formErrors.password ? <span className=\"form-error\">Must be 8 or more characters</span> : null}\n                                    </div>\n                                </div>\n                                <div className=\"form-row form-button-row\">\n                                    <button type=\"submit\" className=\"form-btn\">Signup</button><br/>\n                                    <span className=\"form-subtext\">\n                                        Already signed up? <NavLink className=\"text-link\" exact to=\"/login\">log in</NavLink>\n                                    </span>\n                                </div>\n                            </form>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Signup;","import React, {useState} from \"react\";\nimport { NavLink, useHistory } from 'react-router-dom';\nimport \"./stylesheets/Sections.css\";\nimport \"./stylesheets/Forms.css\";\n\nconst Login = ({login}) => {\n    const history = useHistory();\n\n    const [formData, setFormData] = useState({\n        username: \"\",\n        password: \"\"\n    });\n\n    const [formErrors, setFormErrors] = useState({\n        username: false,\n        password: false\n    });\n\n    const handleChange = (e) => {\n        const {name, value} = e.target;\n        setFormData(formData => ({\n            ...formData, [name]: value\n        }));\n    }\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        const valid = validateLogin();\n        if (valid) {\n            let res = await login(formData);\n            if(res.success){\n                history.push(\"/dashboard\");\n            } else {}\n        }\n    }\n\n    const validateLogin = () => {\n        let valid = true;\n        setFormErrors({\n            username: false,\n            password: false\n        });\n        if (formData[\"username\"].length < 6){\n            valid = false;\n            setFormErrors(formErrors => ({\n                ...formErrors, \"username\": true\n            }))\n        }\n        if (formData[\"password\"].length < 8){\n            valid = false;\n            setFormErrors(formErrors => ({\n                ...formErrors, \"password\": true\n            }))\n        }\n        return valid;\n    }\n\n    return (\n        <div className=\"Login\">\n            <div className=\"section\">\n                <div className=\"col-20 col\">\n                    <div className=\"card formcard\">\n                        <h4 className=\"card-title\">Login</h4>\n                        <div className=\"card-content\">\n                            <form className=\"form\" onSubmit={handleSubmit}>\n                                <div className=\"form-row\">\n                                    <div className=\"form-s\">\n                                        <label htmlFor=\"username\">Username</label>\n                                        <input \n                                            className={`form-input ${formErrors.username ? \"input-error\" : \"\"}`}\n                                            id=\"username\" \n                                            value={formData.username} \n                                            onChange={handleChange}\n                                            name=\"username\"\n                                            type=\"text\"\n                                        />\n                                        {formErrors.username ? <span className=\"form-error\">Invalid Username</span> : null}\n                                    </div>\n                                    <div className=\"form-s\">\n                                        <label htmlFor=\"password\">Password</label>\n                                        <input \n                                            className={`form-input ${formErrors.password ? \"input-error\" : \"\"}`}\n                                            id=\"password\" \n                                            value={formData.password} \n                                            onChange={handleChange}\n                                            name=\"password\"\n                                            type=\"password\"\n                                        />\n                                        {formErrors.password ? <span className=\"form-error\">Invalid Password</span> : null}\n                                    </div>\n                                </div> \n                                <div className=\"form-row form-button-row\">\n                                    <button type=\"submit\" className=\"form-btn\">Login</button><br/>\n                                    <span className=\"form-subtext\">\n                                        Not signed up? <NavLink className=\"text-link\" exact to=\"/signup\">signup</NavLink>\n                                    </span>\n                                </div>\n                            </form>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Login;","import React, { useState, useContext } from \"react\";\nimport { useHistory } from 'react-router-dom';\nimport UserContext from \"./UserContext\";\nimport \"./stylesheets/Sections.css\"\nimport \"./stylesheets/Forms.css\";\n\nconst NewGroup = ({createGroup}) => {\n    const history = useHistory();\n    const {curUser} = useContext(UserContext);\n\n    const [formData, setFormData] = useState({\n        title: \"\",\n        description: \"\",\n        username: curUser.username\n    });\n\n    const [formErrors, setFormErrors] = useState({\n        title: false,\n        description: false\n    });\n\n    const handleChange = (e) => {\n        const {name, value} = e.target;\n        setFormData(formData => ({\n            ...formData, [name]: value\n        }));\n    }\n\n    const validateGroup = () => {\n        let valid = true;\n        setFormErrors({\n            title: false,\n            description: false\n        })\n        if (formData[\"title\"].length < 1){\n            valid = false;\n            setFormErrors(formErrors => ({\n                ...formErrors, \"title\": true\n            }))\n        }\n        if (formData[\"description\"].length < 1){\n            valid = false;\n            setFormErrors(formErrors => ({\n                ...formErrors, \"description\": true\n            }))\n        }\n        return valid;\n    }\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        const valid = validateGroup();\n        if (valid){\n            let res = await createGroup(formData);\n            if(res.success){\n                history.push(\"/dashboard\");\n            } else {}\n        }\n    }\n\n    return (\n        <div className=\"NewGroup\">\n            <div className=\"section\">\n                <div className=\"col-20 col\">\n                    <div className=\"card formcard\">\n                        <h4 className=\"card-title\">Create a new group</h4>\n                        <div className=\"card-content\">\n                            <form className=\"form\" onSubmit={handleSubmit}>\n                                <div className=\"form-row\">\n                                    <div className=\"form-s\">\n                                        <label htmlFor=\"title\">Title</label>\n                                        <input \n                                            className={`form-input ${formErrors.title ? \"input-error\" : \"\"}`}\n                                            id=\"title\" \n                                            value={formData.title} \n                                            onChange={handleChange}\n                                            name=\"title\"\n                                            type=\"text\"\n                                        />\n                                        {formErrors.title ? <span className=\"form-error\">This value is required</span> : null}\n                                    </div>\n                                    <div className=\"form-s\">\n                                        <label htmlFor=\"description\">Description</label>\n                                        <input \n                                            className={`form-input ${formErrors.description ? \"input-error\" : \"\"}`}\n                                            id=\"description\" \n                                            value={formData.description} \n                                            onChange={handleChange}\n                                            name=\"description\"\n                                            type=\"text\"\n                                        />\n                                        {formErrors.description ? <span className=\"form-error\">This value is required</span> : null}\n                                    </div>\n                                </div> \n                                <div className=\"form-row form-button-row\">\n                                    <button type=\"submit\" className=\"form-btn\">Create</button><br/>\n                                </div>\n                            </form>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default NewGroup;","import axios from \"axios\";\n\nconst BASE_URL = process.env.REACT_APP_BASE_URL || \"http://localhost:5000\";\n\nclass SchedulerApi {\n    static token;\n\n    static async request(endpoint, data = {}, method = \"get\") {\n        const url = `${BASE_URL}/${endpoint}`;\n        const headers = { Authorization: `Bearer ${SchedulerApi.token}` };\n        const params = (method === \"get\") ? data : {};\n        try {\n          return (await axios({ url, method, data, params, headers })).data;\n        } catch (err) {\n          let message = err.response.data.error.message;\n          alert(message);\n          throw Array.isArray(message) ? message : [message];\n        }\n    }\n\n    static async signup(data) {\n        let res = await this.request(`auth/signup`, data, \"post\");\n        return res.token;\n    }\n\n    static async login(data) {\n        let res = await this.request(`auth/login`, data, \"post\");\n        return res.token;\n    }\n\n    static async getUser(username) {\n        let res = await this.request(`users/${username}`);\n        return res.user;\n    }\n\n    static async createGroup(data) {\n        let res = await this.request(`groups/new`, data, \"post\");\n        return res.group;\n    }\n\n    static async getGroup(data) {\n        let res = await this.request(`groups/get/${data.group_id}`, data, \"post\");\n        return res.group;\n    }\n\n    static async getGroups(username) {\n        let res = await this.request(`groups/${username}/all`);\n        return res.groups;\n    }\n\n    static async leaveGroup(data) {\n        let res = await this.request(`groups/leave/${data.group_id}`, data, \"post\");\n        return res;\n    }\n\n    static async addMember(data) {\n        let res = await this.request(`groups/add/${data.group_id}`, data, \"post\");\n        return res;\n    }\n\n    static async addAnnouncement(data) {\n        let res = await this.request(`groups/announcement/add`, data, \"post\");\n        return res;\n    }\n\n    static async remAnnouncement(data) {\n        let res = await this.request(`groups/announcement/remove`, data, \"post\");\n        return res;\n    }\n\n    static async addTodo(data) {\n        let res = await this.request(`groups/todo/add`, data, \"post\");\n        return res;\n    }\n\n    static async changeTodo(data) {\n        let res = await this.request(`groups/todo/update`, data, \"post\");\n        return res;\n    }\n}\n\nexport default SchedulerApi;","import React, { useRef, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport io from \"socket.io-client\";\nimport \"./stylesheets/Chatroom.css\"\n\nconst Chatroom = () => {\n    const {roomID} = useParams();\n    const userVideo = useRef();\n    const partnerVideo = useRef();\n    const peerRef = useRef();\n    const socketRef = useRef();\n    const otherUser = useRef();\n    const userStream = useRef();\n\n    useEffect(() => {\n        navigator.mediaDevices.getUserMedia({ audio: true, video: true }).then(stream => {\n            userVideo.current.srcObject = stream;\n            userStream.current = stream;\n            socketRef.current = io.connect(process.env.REACT_APP_BASE_URL || \"http://localhost:5000\");\n            socketRef.current.emit(\"join room\", roomID);\n            socketRef.current.on('other user', userID => {\n                callUser(userID);\n                otherUser.current = userID;\n            });\n            socketRef.current.on(\"user joined\", userID => {\n                otherUser.current = userID;\n            });\n            socketRef.current.on(\"offer\", handleRecieveCall);\n            socketRef.current.on(\"answer\", handleAnswer);\n            socketRef.current.on(\"ice-candidate\", handleNewICECandidateMsg);\n        });\n    }, [roomID]);\n\n    function callUser(userID) {\n        peerRef.current = createPeer(userID);\n        userStream.current.getTracks().forEach(track => peerRef.current.addTrack(track, userStream.current));\n    }\n\n    function createPeer(userID) {\n        const peer = new RTCPeerConnection({\n            iceServers: [\n                {urls: \"stun:stun.stunprotocol.org\"},\n                {urls: 'turn:numb.viagenie.ca',credential: 'muazkh',username: 'webrtc@live.com'},\n            ]\n        });\n        peer.onicecandidate = handleICECandidateEvent;\n        peer.ontrack = handleTrackEvent;\n        peer.onnegotiationneeded = () => handleSelectedEvent(userID);\n        return peer;\n    }\n\n    function handleSelectedEvent(userID) {\n        peerRef.current.createOffer().then(offer => {\n            return peerRef.current.setLocalDescription(offer);\n        }).then(() => {\n            const payload = {\n                target: userID,\n                caller: socketRef.current.id,\n                sdp: peerRef.current.localDescription\n            };\n            socketRef.current.emit(\"offer\", payload);\n        }).catch(e => console.log(e));\n    }\n\n    function handleRecieveCall(incoming) {\n        peerRef.current = createPeer();\n        const desc = new RTCSessionDescription(incoming.sdp);\n        peerRef.current.setRemoteDescription(desc).then(() => {\n            userStream.current.getTracks().forEach(track => peerRef.current.addTrack(track, userStream.current));\n        }).then(() => {\n            return peerRef.current.createAnswer();\n        }).then(answer => {\n            return peerRef.current.setLocalDescription(answer);\n        }).then(() => {\n            const payload = {\n                target: incoming.caller,\n                caller: socketRef.current.id,\n                sdp: peerRef.current.localDescription\n            }\n            socketRef.current.emit(\"answer\", payload);\n        })\n    }\n\n    function handleAnswer(message) {\n        const desc = new RTCSessionDescription(message.sdp);\n        peerRef.current.setRemoteDescription(desc).catch(e => console.log(e));\n    }\n\n    function handleICECandidateEvent(e) {\n        if (e.candidate) {\n            const payload = {\n                target: otherUser.current,\n                candidate: e.candidate,\n            }\n            socketRef.current.emit(\"ice-candidate\", payload);\n        }\n    }\n\n    function handleNewICECandidateMsg(incoming) {\n        const candidate = new RTCIceCandidate(incoming);\n        peerRef.current.addIceCandidate(candidate)\n            .catch(e => console.log(e));\n    }\n\n    function handleTrackEvent(e) {\n        partnerVideo.current.srcObject = e.streams[0];\n    };\n\n    return (\n        <div className=\"Chatroom\">\n            <div className=\"videos-section\">\n                <video autoPlay muted ref={userVideo} className=\"user-video video\"/>\n                <video autoPlay ref={partnerVideo} className=\"partner-video video\"/>\n            </div>\n            <span className=\"roomidtext\">Call ID: <br/>{roomID}</span>\n        </div>\n    );\n};\n\nexport default Chatroom;","import { useState, useEffect } from \"react\";\n\nconst useLocalStorage = (key, initVal = null) => {\n    const value = localStorage.getItem(key) || initVal;\n    const [item, setItem] = useState(value);\n    useEffect(function setLocalStorage(){\n        item === null ?\n            localStorage.removeItem(key) :\n            localStorage.setItem(key, item);\n    }, [key, item]);\n    return [item, setItem];\n}\n\nexport default useLocalStorage;","import React, {useContext} from \"react\";\nimport {Route, Redirect} from \"react-router-dom\";\nimport UserContext from \"./UserContext\";\n\nconst ProtectedRoute = ({exact, path, children}) => {\n    const {curUser} = useContext(UserContext);\n\n    if (!curUser) return <Redirect to=\"/login\"/>\n\n    return (\n        <Route exact={exact} path={path}>\n            {children}\n        </Route>\n    )\n}\n\nexport default ProtectedRoute;","import React, {useContext} from \"react\";\nimport {Route, Redirect} from \"react-router-dom\";\nimport UserContext from \"./UserContext\";\n\nconst LoggedOutRoute = ({exact, path, children}) => {\n    const {curUser} = useContext(UserContext);\n\n    if (curUser !== null) return <Redirect to=\"/dashboard\" />\n\n    return (\n        <Route exact={exact} path={path}>\n            {children}\n        </Route>\n    )\n}\n\nexport default LoggedOutRoute;","import Dashboard from \"./Dashboard\";\nimport Navbar from \"./Navbar\";\nimport Group from \"./Group\";\nimport Signup from \"./Signup\";\nimport Login from \"./Login\"\nimport NewGroup from \"./NewGroup\";\nimport SchedulerApi from \"./api\";\nimport Chatroom from \"./Chatroom\";\nimport React, {useState, useEffect} from \"react\";\nimport UserContext from \"./UserContext\";\nimport jwt from \"jsonwebtoken\";\nimport useLocalStorage from \"./useLocalStorage\";\nimport {BrowserRouter, Switch, Redirect} from \"react-router-dom\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport LoggedOutRoute from \"./LoggedOutRoute\";\nexport const token_storage = \"scheduler-token\";\n\nfunction App() {\n\n  const [token, setToken] = useLocalStorage(token_storage);\n  const [userGroups, setUserGroups] = useState([]);\n  const [curUser, setCurUser] = useState(null);\n  const [navHidden, setNavHidden] = useState(false);\n  const [userLoaded, setUserLoaded] = useState(false);\n\n  useEffect(function loadUser(){\n    async function getCurUser(){\n      if (token) {\n        let {username} = jwt.decode(token);\n        try {\n          SchedulerApi.token = token;\n          let resUser = await SchedulerApi.getUser(username);\n          setCurUser(resUser);\n        } catch(err) {\n          setCurUser(null)\n        }\n        try {\n          let resGroups = await SchedulerApi.getGroups(username);\n          if (resGroups.length) {\n            setUserGroups(resGroups);\n          }\n        } catch(err) {\n          setUserGroups(null);\n        }\n      }\n      setUserLoaded(true);\n    }\n    setUserGroups(null)\n    setUserLoaded(false);\n    getCurUser();\n  }, [token])\n\n  const signup = async (inputData) => {\n    try {\n      let token = await SchedulerApi.signup(inputData);\n      setToken(token);\n      return {success: true};\n    } catch (err) {\n      return {success: false};\n    }\n  }\n\n  const login = async (inputData) => {\n    try {\n      let token = await SchedulerApi.login(inputData);\n      setToken(token);\n      return { success: true};\n    } catch (err) {\n      return { success: false };\n    }\n  }\n\n  const createGroup = async (inputData) => {\n    try {\n      await SchedulerApi.createGroup(inputData);\n      await refreshGroups();\n      return { success: true};\n    } catch (err) {\n      return { success: false };\n    }\n  }\n\n  const getGroups = async (username) => {\n    try {\n      let groups = await SchedulerApi.getGroups(username);\n      return groups;\n    } catch (err) {\n      return {success: false};\n    }\n  }\n\n  const getGroup = async (inputData) => {\n    try {\n      let group = await SchedulerApi.getGroup(inputData);\n      return group;\n    } catch (err) {\n      return false;\n    }\n  }\n\n  const refreshGroups = async () => {\n    let {username} = jwt.decode(token);\n    let groups = await SchedulerApi.getGroups(username);\n    if (groups.length) {\n      setUserGroups(groups);\n    } else {\n      setUserGroups(null)\n    }\n  }\n\n  const leaveGroup = async (inputData) => {\n    try {\n      await SchedulerApi.leaveGroup(inputData);\n      await refreshGroups();\n      return { success: true };\n    } catch (err) {\n      return {success: false};\n    }\n  }\n\n  const addMember = async (inputData) => {\n    try {\n      await SchedulerApi.addMember(inputData);\n      return {success: true};\n    } catch (err) {\n      return {success: false};\n    }\n  }\n\n  const addAnnouncement = async (inputData) => {\n    try {\n      await SchedulerApi.addAnnouncement(inputData);\n      return {success: true};\n    } catch {\n      return {success: false};\n    }\n  }\n\n  const removeAnnouncement = async (inputData) => {\n    try {\n      await SchedulerApi.remAnnouncement(inputData);\n      return {success: true};\n    } catch {\n      return {success: false};\n    }\n  }\n\n  const addTodo = async (inputData) => {\n    try {\n      await SchedulerApi.addTodo(inputData);\n      return {success: true};\n    } catch {\n      return {success: false};\n    }\n  }\n\n  const changeTodo = async (inputData) => {\n    try {\n      await SchedulerApi.changeTodo(inputData);\n      return {success: true};\n    } catch {\n      return {success: false};\n    }\n  }\n\n  const logout = () => {\n    setUserGroups(null);\n    setCurUser(null);\n    setToken(null);\n  }\n\n  return (\n    <>\n      <BrowserRouter>\n        <UserContext.Provider value={{curUser, setCurUser, userGroups}}>\n          <Navbar navHidden={navHidden} setNavHidden={setNavHidden} userLoaded={curUser} logout={logout}/>\n          <div className={`${navHidden ? \"closed\" : \"open\"}-content-wrapper`}>\n            <div className=\"main-content\">\n              <Switch>\n                <LoggedOutRoute exact path=\"/signup\">\n                  <Signup signup={signup}/>\n                </LoggedOutRoute>\n                <LoggedOutRoute exact path=\"/login\">\n                  <Login login={login}/>\n                </LoggedOutRoute>\n                <ProtectedRoute exact path=\"/dashboard\">\n                  <Dashboard/>\n                </ProtectedRoute>\n                <ProtectedRoute exact path=\"/room/:roomID\">\n                  <Chatroom/>\n                </ProtectedRoute>\n                <ProtectedRoute exact path=\"/groups/new\">\n                  <NewGroup createGroup={createGroup}/>\n                </ProtectedRoute>\n                <ProtectedRoute exact path=\"/groups/:id\">\n                  <Group changeTodo={changeTodo} addTodoS={addTodo} getGroup={getGroup} leaveGroup={leaveGroup} addMember={addMember} addAnnouncement={addAnnouncement} removeAnnouncement={removeAnnouncement}/>\n                </ProtectedRoute>\n                <Redirect to=\"/login\" />\n              </Switch>\n            </div>\n          </div>\n        </UserContext.Provider>\n      </BrowserRouter>\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport \"./stylesheets/Index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}